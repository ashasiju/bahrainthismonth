<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="keywords" content="" />
  <meta name="author" content="Bahrain This Month" />
  <meta name="robots" content="" />
  <meta name="description" content="Events, Entertainment & Things To Do In Bahrain" />
  <meta property="og:title" content="Bahrain This Month" />
  <meta property="og:description" content="Events, Entertainment & Things To Do In Bahrain" />
  <meta property="og:image" content="" />
  <meta name="format-detection" content="telephone=no">
  
  <!-- FAVICONS ICON -->
  <link rel="icon" href="images/favicon.ico" type="image/x-icon" />
  <link rel="shortcut icon" type="image/x-icon" href="images/favicon.png" />
  
  <!-- PAGE TITLE HERE -->
  <title>Bahrain This Month</title>
  
  <!-- MOBILE SPECIFIC -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!--[if lt IE 9]>
  <script src="js/html5shiv.min.js"></script>
  <script src="js/respond.min.js"></script>
  <![endif]-->
  
  <!-- STYLESHEETS -->
  <link rel="stylesheet" type="text/css" href="{{ asset('assets/frond/css/plugins.css') }}">
  <link rel="stylesheet" type="text/css" href="{{ asset('assets/frond/css/style.css') }}">
  <link rel="stylesheet" type="text/css" href="{{ asset('assets/frond/css/templete.css') }}">
  <link class="skin" rel="stylesheet" type="text/css" href="{{ asset('assets/frond/css/skin/skin-1.css') }}">

  <!-- Poppins Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  
</head>
<body id="bg">
<!-- <div id="loading-area"></div> -->
<div class="page-wraper">

  <!-- <header class="site-header header-transparent mo-left headertop-new">
        <div class="sticky-header main-bar-wraper navbar-expand-lg">
            <div class="main-bar clearfix">
                <div class="container clearfix">
                
                        <div class="new-nav">
                            <p class="new-nav"><i class="fa fa-user"></i> &nbsp; Login</p>
                        </div>
             
                    <button class="navbar-toggler collapsed navicon justify-content-end" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span></span>
            <span></span>
            <span></span>
          </button>
               
                    <div class="extra-nav">
                        <div class="extra-cell">
                            <a href="signin.html" class="site-button-link sign_btn"><i class="fa fa-user"></i> &nbsp; Login</a>
              <a href="signin.html" class="site-button-link sign_btn"><i class="ti-import m-r5 rotate90"></i> &nbsp;Sign Up</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header> -->


   <div class="topbar">
    <div class="container clearfix">
        <div class="logo-header mostion">
            <p class="new-nav-p">Thursday, May 28, 2024</p>
        </div>

        <div class="extra-nav mob-event-btn">
            <div class="extra-cell">
                <a href="addevent.html" class="site-button radius-xl m-l10 navbar_btn"><i class="fa fa-plus m-r5"></i> Add Events</a>
            </div>
        </div>

        <div class="extra-nav extra-new-nav">
            <div class="extra-cell">
                <ul class="list-inline m-a0 footericon-new">
                    <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-facebook-f icon-topbar"></i></a></li>
                    <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-linkedin icon-topbar"></i></a></li>
                    <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-youtube-play icon-topbar"></i></a></li>
                    <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-twitter icon-topbar"></i></a></li>
                    <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-whatsapp icon-topbar"></i></a></li>
                    <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-pinterest-p icon-topbar"></i></a></li>
                    <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-instagram icon-topbar"></i></a></li>
                </ul>
                <a href="signin.html" class="site-button-link sign_btn-new"><i class="fa fa-user"></i> &nbsp; Login</a>
                <a href="signin.html" class="site-button-link sign_btn-new"><i class="ti-import m-r5 rotate90"></i> &nbsp;Sign Up</a>
            </div>
        </div>
    </div>
  </div>

<!-- header -->
<header class="site-header header-transparent mo-left">
    <!-- main header -->
    <div class="sticky-header main-bar-wraper navbar-expand-lg">
        <div class="main-bar clearfix">
            <div class="container clearfix header-newsec">
                <!-- website logo -->
                <div class="logo-header mostion moblogo-new">
                    <a href="index.php" class="logo-1"><img src="images/logo-black.png" alt=""></a>
                    <a href="index.php" class="logo-2"><img src="images/logo-black.png" alt=""></a>
                </div>
                <!-- nav toggle button -->
                <button class="navbar-toggler collapsed navicon justify-content-end toggler-new" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>

                <div class="extra-nav mobarea-btn">
                        <div class="extra-cell">
                            <!-- <a href="signin.html" class="site-button-link sign_btn"> Sign In</a> -->
              <a href="addevent.html" class="site-button radius-xl m-l10 navbar_btn"><i class="fa fa-plus m-r5"></i> Add Events</a>

              <!-- <div class="wrapper-search">
                <div class="btn-search">
                    <i class="fa fa-search" aria-hidden="true"></i>
                </div>
                <div class="form">
                    <label id="search">Search here</label><br>
                    <input type="text" class="input">
                </div>
              </div> -->


              <div class="">
                <form role="search" method="get" class="search-form" action="">
                  <label>

                    <input type="search" class="search-field" placeholder="Search …" value="" name="s" title="Search for:" />
                  </label>
                  <input type="submit" class="search-submit" value="Search" />
                </form>
              </div>

                        </div>

                    </div>

                <!-- main nav (collapsed on mobile) -->
                <div class="header-nav navbar-collapse collapse justify-content-end" id="navbarNavDropdown">
                    <ul class="nav navbar-nav">
                        <li class="down"><a href="{{ url('events') }}">Events</a></li>
                        <li class="nav-new-head"><a href="{{ url('venues') }}">Venues</a></li>
                        <li class="nav-new-head"><a href="{{ url('gallery') }}">Gallery</a></li>
                        <li class="nav-new-head"><a href="{{ url('magazine') }}">Magazine</a>
                            <ul class="sub-menu">
                                <li><a href="magazine-single-page.html">Business</a></li>
                                <li><a href="magazine-single-page.html">Dining</a></li>
                                <li><a href="magazine-single-page.html">Downtime</a></li>
                                <li><a href="magazine-single-page.html">Features</a></li>
                                <li><a href="magazine-single-page.html">Interviews</a></li>
                                <li><a href="magazine-single-page.html">Lifestyle</a></li>
                                <li><a href="magazine-single-page.html">Marketplace</a></li>
                                <li><a href="magazine-single-page.html">Motoring</a></li>
                            </ul>
                        </li>
                        <li class="down nav-new-head"><a href="updates.html">Updates</a>
                            <ul class="sub-menu">
                                <li><a href="updates-single-page.html">New to Bahrain</a></li>
                                <li><a href="updates-single-page.html">News</a></li>
                                <li><a href="updates-single-page.html">Webstories</a></li>
                            </ul>
                        </li>
                        <li class="down nav-new-head"><a href="digital-edition.html">Digital Edition</a></li>
                    </ul>

                    <!-- Social Media and Authentication in Mobile -->
                    <ul class="list-inline m-a0 footericon-new mobres-icon">
                        <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-facebook-f icon-topbar"></i></a></li>
                        <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-linkedin icon-topbar"></i></a></li>
                        <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-youtube-play icon-topbar"></i></a></li>
                        <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-twitter icon-topbar"></i></a></li>
                        <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-whatsapp icon-topbar"></i></a></li>
                        <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-pinterest-p icon-topbar"></i></a></li>
                        <li class="iconlist"><a href="#" target="_blank"><i class="fa fa-instagram icon-topbar"></i></a></li>
                    </ul>
                    <a href="signin.html" class="site-button-link sign_btn-new login-mobsec"><i class="fa fa-user"></i> &nbsp; Login</a>
                    <a href="signin.html" class="site-button-link sign_btn-new sign-mobsec"><i class="ti-import m-r5 rotate90"></i> &nbsp;Sign Up</a>
                </div>
            </div>
        </div>
    </div>
</header>

    <!-- header END -->
 <div class="page-content bg-white">



  

 <div class="bannerbg-section">
        <div class="container text-center">
          <div class="carousel-container1">
            @foreach($top_ad as $tad)
              <img src="{{asset($tad->banner)}}" class="banner-images1" alt="Banner Image 1">
             @endforeach
              <div class="custom-dot-navigation1"></div> <!-- Unique class name for dots -->
          </div>
        </div>
      </div> 


<!-- Story Section -->


<div id="snappdEmbedWidget" class="eO1VLWTKO8cmWdvDPvvTgXhEoVa2" data-snappdwidget="eO1VLWTKO8cmWdvDPvvTgXhEoVa2" data-shape="circle" data-border="555555" data-hover="5b28f9" data-size="56" data-hideavatar="1" data-number="10" data-alignment="left"></div> 
 <script id="snappdEmbedWidget" src="https://firebasestorage.googleapis.com/v0/b/snappd-6be54.appspot.com/o/widget%2Farchive-widget%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2.js?alt=media&token=snappd-widget-cloud-new"></script>

 <script>
  if(typeof(_snappd_widgetStory_playbackStyling) === 'undefined'){
  var _snappd_widgetStory_playbackStyling = function(cssUrl){
    var cssId = '_snappd_playbackUI_CSS';  // you could encode the css path itself to generate id..
    if (!document.getElementById(cssId))
    {
        var head  = document.getElementsByTagName('head')[0];
        var link  = document.createElement('link');
        link.id   = cssId;
        link.rel  = 'stylesheet';
        link.type = 'text/css';
        link.href = cssUrl;
        link.media = 'all';
        head.appendChild(link);
    }
  } 
  var _type = 'prod';
  if(_type == 'prod'){
    _snappd_widgetStory_playbackStyling('https://rawcdn.githack.com/snappd/_playbackUI/935c48f33ffb2450280f33ad7ccaad97f0300d57/css.min.css');
  }else{
    _snappd_widgetStory_playbackStyling('https://raw.githack.com/snappd/_playbackUI/master/css.min.css');
  }
    
  function _snappd_storyPlaybackAnimate({duration, draw, timing}) {
    let start = performance.now();
    requestAnimationFrame(function animate(time) {
      let timeFraction = (time - start) / duration;
      if (timeFraction > 1) timeFraction = 1;
  
      let progress = timing(timeFraction)
  
      draw(progress);
  
      if (timeFraction < 1) {
        requestAnimationFrame(animate);
      }
  
    });
  }
   
  snappd_getCurrentTimestamp = function(){
    if (!Date.now) {
        Date.now = function() { return new Date().getTime(); }
    }
    return Date.now();
  }
  var _snappd_widgetStoryPlayback = function (storyObject, poster, ele, instagramId) {
    
       if(window.snappd_autoMoveToNextStory == false){
        document.querySelector('.snappdOverlayBackground').dataset.timestamp = snappd_getCurrentTimestamp();
       }  
       //Get ele index
       var child = ele;
       var parent = child.parentNode;
       
        if(instagramId == '90min_football'){
          child = child.parentNode;
          parent = parent.parentNode;
        }
       // The equivalent of parent.children.indexOf(child)
       window.snappd_currentPlayingStoryNumber = Array.prototype.indexOf.call(parent.children, child)+1;
       
       if(window.snappd_autoMoveToNextStory == false){
        
        snappd_trackWidgetEvent('widget start click', 
       'number of stories='+window.snappd_numStories+';story number='+window.snappd_currentPlayingStoryNumber+';story content provider='+instagramId+';');
       
         
       }
       window.snappd_autoMoveToNextStory = false;
       
       window.snappd_didClickBeforeAction = false;
       
       try{
         var storyId = ele.dataset['storyId'];
         if (typeof(localStorage) !== "undefined") {
          if (localStorage.snappd_ViewedStories) {
          localStorage.snappd_ViewedStories += ','+storyId;
          } else {
            localStorage.snappd_ViewedStories = storyId;
          }
        }
        //ele.classList += ' viewed';
        if(instagramId == '90min_football'){
          //add viewed to parent ele 
          //ele.parentNode.classList += ' viewed';
        }
       }catch(e){
         
       }
       this.adSlot = false;
       this.instagramId = instagramId;
       this.id = 'snappd_storyPlayer'+this.uuid();
       this.storyObject = storyObject;
       this.storyPoster = poster;
       this.clickedElement = ele;
       this.version = '0.0.1';
       this.photoDuration = 3000;
       this.autoPlayNextStory = true;
       this.playerOpen = true;
       this.hasStoryEnded = false;
       this.snappdCurrentStoryClipIndex = 0;
       this.type = 'dev';
       this.linkOpens = '_blank'; //_self';
       this.audioOn = false;
       
           
        var scriptUrlParams = document.querySelector('script#snappdEmbedWidget').src;
        var adSlotId = snappd_getRefQueryParam('adUnitPlaceHolder', scriptUrlParams);
        if(typeof(adSlotId) !== 'undefined'){
          this.adSlot = adSlotId;
        }
       
       if(typeof(ele.dataset.instagramId) !== 'undefined' ){
           this.instagramId = ele.dataset.instagramId;
       }
       //console.log('ðŸ“š-Snappd Story Playerv-'+this.version+' - Instance Created '+this.id, this);
       this.createStoryEventListeners();
       this.mediaPoolFirstBuild();
  };
  _snappd_widgetStoryPlayback.prototype.uuid = function(){
    var dt = new Date().getTime();
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
      var r = (dt + Math.random()*16)%16 | 0;
      dt = Math.floor(dt/16);
      return (c=='x' ? r :(r&0x3|0x8)).toString(16);
    });
    return uuid;
  };
  _snappd_widgetStoryPlayback.prototype.unmuteStory = function()
  {
    //snappd-story-unmute-audioTap
    
    var slideNumber = Math.ceil(this.snappdCurrentStoryClipIndex+1);
    snappd_trackWidgetEvent('widget unmute', 'story number='+window.snappd_currentPlayingStoryNumber+';slide number='+slideNumber+';');
    
    //Loop all videos and add muted attribute
    var videos = document.querySelectorAll('.snappdStoryOverlay-StoryHolder .snappdHighlightWidget_video video');
    Array.from(videos).forEach(video => {
      video.muted = false;
    });
    
    
    //Update icon
    document.querySelector('.snappd-story-audio-controls div').classList = 'snappd-story-mute-audioTap';
  }
  _snappd_widgetStoryPlayback.prototype.muteStory = function()
  {
    //snappd-story-mute-audioTap
    
    var slideNumber = Math.ceil(this.snappdCurrentStoryClipIndex+1);
    snappd_trackWidgetEvent('widget mute', 'story number='+window.snappd_currentPlayingStoryNumber+';slide number='+slideNumber+';');
    
    //Loop all videos and set muted attribute
    var videos = document.querySelectorAll('.snappdStoryOverlay-StoryHolder .snappdHighlightWidget_video video');
    Array.from(videos).forEach(video => {
      video.muted = true;
    });
    
    //Update icon
    document.querySelector('.snappd-story-audio-controls div').classList = 'snappd-story-unmute-audioTap';
  }
  _snappd_widgetStoryPlayback.prototype.audioControlsTap = function(event)
  {
    //snappd-story-unmute-audioTap
    if(event.target.classList == 'snappd-story-unmute-audioTap'){
      this.unmuteStory();
    }else{
      this.muteStory();
    }
  }
  _snappd_widgetStoryPlayback.prototype.mediaPoolFirstBuild = function(){
    //Create media pool
    
    var assets = this.storyObject;
    
    if(assets[0].type == 'photo'){
      if(assets[0].asset != this.storyPoster){
        this.storyPoster = assets[0].asset;
      }
    }else{
      if(assets[0].thumbnail != ''){
        if(assets[0].thumbnail != this.storyPoster){
          this.storyPoster = assets[0].thumbnail;
        }
      }
    }
    
    //TODO: Add limit to number of assets in media pool and add media pool waiting limit limit to 5. 2 assets either side of current asset in story.
    
    var whitelabelEnabled = false;
    
    if('no' == 'yes'){
      whitelabelEnabled = true;
    }

    var svgIcon = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 476.737 476.737" style="height: 19px;position: relative;bottom: 5px;" xml:space="preserve" class="snappd-swipeup-bounce"> <g> <g> <g> <path style="fill: rgb(255, 255, 255);" d="M238.369,0C106.726,0,0,106.726,0,238.369c0,131.675,106.726,238.369,238.369,238.369 c131.675,0,238.369-106.694,238.369-238.369C476.737,106.726,370.043,0,238.369,0z M352.722,289.221 c-6.198,6.198-16.273,6.198-22.47,0l-91.883-91.883l-91.883,91.883c-6.198,6.198-16.273,6.198-22.47,0 c-6.198-6.166-6.198-16.273,0-22.47L227.086,163.68c3.115-3.115,7.183-4.64,11.283-4.64s8.168,1.526,11.283,4.64L352.722,266.75 C358.92,272.948,358.92,282.991,352.722,289.221z"></path> </g> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg>';
    //Loop All Story Assets
    //Add All Assets to this object
    var storyAssetsHTML = '<div class="snappdStoryOverlay-StoryHolder" style="background-image:url('+this.storyPoster+');background-color:#555;">';
    
    if(whitelabelEnabled == false){
      storyAssetsHTML += '<div class="snappd-watermark-holder">'
      +'  <a href="https://storieswidget.com?utm_medium=watermark&utm_source='+this.instagramId+'" target="_blank"><img src="https://firebasestorage.googleapis.com/v0/b/snappd-6be54.appspot.com/o/widget%2Fimg%2Flogo-p.svg?alt=media&token=snappd-widget-cloud-new"></a></div>';
    }
    
    storyAssetsHTML += '<div class="snappd-move-clip-position">'
    +'  <div data-name="back"></div>'
    +'  <div data-name="forward"></div>'
    +'</div>'
    +'<div class="snappdTimelineFrameHolder">'
    +'<img class="snappdWidget-closePlayer" src="https://firebasestorage.googleapis.com/v0/b/snappd-6be54.appspot.com/o/widget%2Fimg%2FclosePlayer.svg?alt=media&token=snappd-widget-cloud-new">'
    //Add Mute Icon
    +'<div class="snappd-story-audio-controls"><div class="snappd-story-unmute-audioTap"></div></div>'
    //Follow Link
    +'<div class="snappd-story-follow-link"><a class="snappdWidget-infoIcon-link" target="_blank" href="https://instagram.com/'+this.instagramId+'"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="169.063px" height="169.063px" viewBox="0 0 169.063 169.063" style="enable-background:new 0 0 169.063 169.063;" xml:space="preserve"> <g> <path d="M122.406,0H46.654C20.929,0,0,20.93,0,46.655v75.752c0,25.726,20.929,46.655,46.654,46.655h75.752 c25.727,0,46.656-20.93,46.656-46.655V46.655C169.063,20.93,148.133,0,122.406,0z M154.063,122.407 c0,17.455-14.201,31.655-31.656,31.655H46.654C29.2,154.063,15,139.862,15,122.407V46.655C15,29.201,29.2,15,46.654,15h75.752 c17.455,0,31.656,14.201,31.656,31.655V122.407z" style="fill: rgb(255, 255, 255);"></path> <path d="M84.531,40.97c-24.021,0-43.563,19.542-43.563,43.563c0,24.02,19.542,43.561,43.563,43.561s43.563-19.541,43.563-43.561 C128.094,60.512,108.552,40.97,84.531,40.97z M84.531,113.093c-15.749,0-28.563-12.812-28.563-28.561 c0-15.75,12.813-28.563,28.563-28.563s28.563,12.813,28.563,28.563C113.094,100.281,100.28,113.093,84.531,113.093z" style="fill: rgb(255, 255, 255);"></path> <path d="M129.921,28.251c-2.89,0-5.729,1.17-7.77,3.22c-2.051,2.04-3.23,4.88-3.23,7.78c0,2.891,1.18,5.73,3.23,7.78 c2.04,2.04,4.88,3.22,7.77,3.22c2.9,0,5.73-1.18,7.78-3.22c2.05-2.05,3.22-4.89,3.22-7.78c0-2.9-1.17-5.74-3.22-7.78 C135.661,29.421,132.821,28.251,129.921,28.251z" style="fill: rgb(255, 255, 255);"></path> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg></a></div>'
    //Add Loading Spinner
    +'<div class="snappd-widget-story-spinner" active><div class="snappd-widget-story-spinner-container"><div class="snappd-widget-story-spinner-layer"><div class="snappd-widget-story-spinner-circle-clipper left"></div><div class="snappd-widget-story-spinner-circle-clipper right"></div></div></div></div>'
    //Story Timelne
    +'<div class="snappdWidget-timeline-holder">';
    //Add clip elements
    var fixTimeline = '';
    if(assets.length > 45){
      //add css
      fixTimeline = 'style="margin-left: 1px;margin-right: 1px;"';
    }
    
    Array.from(assets).forEach(clip => {
      storyAssetsHTML += '<div class="timeline-element" '+fixTimeline+'><div style="width:0%;"></div></div>';
    });
    storyAssetsHTML += '</div></div>';
    var clipIndex = 0;
    Array.from(assets).forEach(clip => {
      
      var displayClip = 'none';
      if(clipIndex == 0){
        displayClip = 'block';
      }
     
      //TODO: Change to DOM
      var assetDisplay = '<div class="snappdPlayOverlay snappdHighlightWidget_video story-element-'+clipIndex+'" style="display: '+displayClip+';">';
      if(clip.type == 'photo'){
        assetDisplay += '<img class="video_player_image" style="display:block" src="'+clip.asset+'">'
      }
      if(clip.type == 'video'){
        
        assetDisplay += '<div style="overflow:hidden;height: 100%;">'
        +'    <video data-clipindex="'+clipIndex+'" class="video_player" poster="'+clip.thumbnail+'" src="'+clip.asset+'" muted preload preload="auto" playsinline>'
        +'    Your browser does not support the HTML5 video.</video>'
        +'</div>';
      }
      if(clip.link != ''){
        var cta = 'See More';
        if(clip.cta != ''){
          cta = clip.cta;
        }
        assetDisplay += '<div class="snappdPlayerSwipeUpLink" style="display: block;">'
        +'    <a href="'+clip.link+'" target="'+this.linkOpens+'">'+svgIcon+'<span style="display: block;">'+cta+'</span></a>'
        +'  </div>';
      }
      assetDisplay += '</div>';
      storyAssetsHTML += assetDisplay;
      clipIndex++;
    });
    //Check need ot ad adslot
    if(this.adSlot != false){
      storyAssetsHTML += '<div id="'+this.adSlot+'" style="background-color:white;width: 100%;position: absolute;height: 50px;bottom: 0px;z-index: 99999999999;">'
      +'</div>';
      
      //Adjust css
      //does styling exist
      var exist = document.querySelectorAll('.snappd_adunitPlaceholderStyling').length;
      if(exist == 0){
        //adUnitPlaceHolder
        var stylingEleContent = '.snappdPlayOverlay {'
        +' height: calc(100% - 50px)!important;'
        +'}'
        +'.snappd-move-clip-position {'
        +'  height: calc(80% - 50px)!important;'
        +'}'
        +'.snappd-watermark-holder{'
        +'  bottom:50px!important;'
        +'}'
        +'.snappdPlayOverlay .snappdPlayerSwipeUpLink {'
        +'  bottom:50px!important;'
        +'}';
        var snappd_adunitPlaceholderStyling = document.createElement('div');
        snappd_adunitPlaceholderStyling.classList = 'snappd_adunitPlaceholderStyling';
        snappd_adunitPlaceholderStyling.style.display = 'none';
        snappd_adunitPlaceholderStyling.innerHTML = '<style>'+stylingEleContent+'</style>';
        document.body.appendChild(snappd_adunitPlaceholderStyling);
      }
    }
    storyAssetsHTML += '</div>';
    //Render Story
    document.querySelector(".snappd-story-overlay-frame").innerHTML = storyAssetsHTML;
    document.querySelector(".snappdOverlayBackground").style.display = "flex";
    //Listen for forward back clicks
    var that = this;
      document.querySelector(".snappd-move-clip-position").addEventListener("click", function(event) {
        try{
          if(event.target.dataset.name == 'back'){
            
            window.snappd_didClickBeforeAction = true;
            
            var slideNumber = that.snappdCurrentStoryClipIndex-1;
            if(slideNumber != -1){
              snappd_trackWidgetEvent('widget prev slide', 'story number='+window.snappd_currentPlayingStoryNumber+';slide number='+parseInt(slideNumber+1)+';action type=user;');
            }else{
              //console.log('dont track');
            }
            that.mediaChangeElement(that.snappdCurrentStoryClipIndex-1);
          }
          if(event.target.dataset.name == 'forward'){
            
            
            window.snappd_didClickBeforeAction = true;
            
            var slideNumber = that.snappdCurrentStoryClipIndex+1;
            snappd_trackWidgetEvent('widget next slide', 'story number='+window.snappd_currentPlayingStoryNumber+';slide number='+parseInt(slideNumber+1)+';action type=user;');
            that.mediaChangeElement(that.snappdCurrentStoryClipIndex+1);
                    
          }
        }catch(e){
          
        }
      });
      
            
          
      //Event to track is Instagram Icon Clicked
      //var that = this;
      document.querySelector('.snappdTimelineFrameHolder .snappdWidget-infoIcon-link').addEventListener("click", function(event){
        
        var slideNumber = that.snappdCurrentStoryClipIndex+1;
        snappd_trackWidgetEvent('widget instagram logo click', 'slide number='+slideNumber+';story number='+window.snappd_currentPlayingStoryNumber+';');
      });
          
      //Event to track if see more
      try{
        if(document.querySelectorAll('.snappdPlayerSwipeUpLink a').length != 0){
          var storySeeMoreListeners = document.querySelectorAll('.snappdPlayerSwipeUpLink a');
          Array.from(storySeeMoreListeners).forEach(seeMoreLink => {
            
            seeMoreLink.addEventListener("click", function(event){
              
              var slideNumber = that.snappdCurrentStoryClipIndex+1;
              console.log('see more clicked');
              snappd_trackWidgetEvent('widget see more click', 'slide number='+slideNumber+';story number='+window.snappd_currentPlayingStoryNumber+';link='+seeMoreLink.href+';');
            });
          });
        }
      }catch(e){
        
      }
      
      //Event to mute or ummute story
      
      document.querySelector(".snappd-story-audio-controls div").addEventListener("click", function(event) {
        that.audioControlsTap(event);
      });
    this.mediaChangeElement(0);
  }
  _snappd_widgetStoryPlayback.prototype.storyEnded = function(){
    if(this.hasStoryEnded == false){
      console.log('Story Ended');
      
      this.hasStoryEnded = true;
      
      //TODO Show ad here and move to next story on completr or skip if enabled
      if(this.autoPlayNextStory == true){
        
        window.snappd_autoMoveToNextStory = true;
        this.playNextStoryInCollection();
      }
      
    }
  }
  _snappd_widgetStoryPlayback.prototype.goToPrevious = function(){
    var t = this;
    try{
      
      var ele = this.clickedElement.previousElementSibling;
      
      if(t.instagramId == '90min_football'){
        ele = this.clickedElement.parentNode.previousElementSibling.querySelector('.snappd-story-circle');
        //console.log(ele);
      }

      //if(this.clickedElement.previousElementSibling){
      if(ele){
        this.closeStoryPlayer();
        //var ele = this.clickedElement.previousElementSibling;
        
  
        snappd_trackWidgetEvent('widget prev story', 
       'story number='+parseInt(window.snappd_currentPlayingStoryNumber-1)+';action type=user;');
       
        if(typeof ele.click == 'function') {
          ele.click()
        } else if(typeof ele.onclick == 'function') {
          ele.onclick()
        }
      }else{
        //Add first story
       
      }
    }catch(e){
      
    }
  }
  _snappd_widgetStoryPlayback.prototype.playNextStoryInCollection = function(){
    var t = this;
    try{
      
      var ele = this.clickedElement.nextElementSibling;
      
      if(t.instagramId == '90min_football'){
        ele = this.clickedElement.parentNode.nextElementSibling;
        //console.log(ele);
      }
      
      //if(this.clickedElement.nextElementSibling){
      //console.log(ele);
      if(ele){
        this.closeStoryPlayer();
        
        if(t.instagramId == '90min_football'){
          ele = ele.querySelector('.snappd-story-circle');
          //console.log(ele);
        }
        //var ele = this.clickedElement.nextElementSibling;
        
        //find next story outside parentnode
        var actionTriggerType = 'auto';
        if(window.snappd_didClickBeforeAction == true){
          actionTriggerType = 'user';
        }
      
        snappd_trackWidgetEvent('widget next story', 
       'story number='+parseInt(window.snappd_currentPlayingStoryNumber+1)+';action type='+actionTriggerType+';');
       
        if(typeof ele.click == 'function') {
          ele.click()
        } else if(typeof ele.onclick == 'function') {
          ele.onclick()
        }
      }else{
        console.log('No more stories in collection');
        
        var timeSpent = this.checkStoryPlayingSeconds();
        var slideNumber = Math.ceil(this.snappdCurrentStoryClipIndex+1);
        
        
        var actionTriggerType = 'auto';
        if(window.snappd_didClickBeforeAction == true){
          actionTriggerType = 'user';
        }
        
        snappd_trackWidgetEvent('widget end', 
       'story number='+parseInt(window.snappd_currentPlayingStoryNumber)+';slide number='+slideNumber+';time in widget='+timeSpent+';action type='+actionTriggerType+';');
       
       //Reset seconds count
        document.querySelector('.snappdOverlayBackground').removeAttribute("data-seconds");
        document.querySelector('.snappdOverlayBackground').removeAttribute("data-timestamp");
        
        
        this.closeStoryPlayer();
       
      }
    }catch(e){
      console.log(e);
    }
  }
  _snappd_widgetStoryPlayback.prototype.mediaChangeElement = function(clipIndex){
    
    // TODO if clipindex == -1 move to previous days story..
    if(clipIndex == -1){
      this.goToPrevious();
      return false;
    }
        
    //Close All and stop sound
    if(this.storyObject[clipIndex]){
      //update current clip index
      this.snappdCurrentStoryClipIndex = clipIndex;
      //Clear timer if moving to a new clip
      clearTimeout(this.snappdStoryPhotoTimer);
      if(clipIndex == 1){
        //Hide Story poster now playing
        document.querySelector('.snappdStoryOverlay-StoryHolder').style.backgroundImage = '';
      }
    }else{
      //Not ended if moving backwards from first clip
      if(this.snappdCurrentStoryClipIndex != 0){
        this.storyEnded();
      }
      
      //In only 1 clip story has ended
      if(this.snappdCurrentStoryClipIndex == 0 && this.storyObject.length == 1){
        this.storyEnded();
      }
      return false;
    }
    var currentAsset = this.storyObject[clipIndex];
    var assetClipElements = document.querySelectorAll(".snappdHighlightWidget_video");
    //Display new element and play is present
    var newAssetClip = document.querySelector('.snappdHighlightWidget_video.story-element-'+clipIndex);
    newAssetClip.style.display = 'block';
    //Hide others
    var countItems = 0;
    Array.from(assetClipElements).forEach(assetElement => {
      if(countItems != clipIndex){
        assetElement.style.display = 'none';
        try{
          assetElement.querySelector('video').pause();
        }catch(e){
          
        }
      }
      countItems++;
    });
    //Check Type
    
    var that = this;
    if(currentAsset.type == 'video'){
      //Move to start
      document.querySelector('.snappd-widget-story-spinner').setAttribute('active', '');
      newAssetClip.querySelector('video').currentTime = 0;
      try{
        var promise = newAssetClip.querySelector('video').play();
        //TODO: Check if chrome and explictitly check for promise
        /*
        var promise = newAssetClip.querySelector('video').play().catch(function() {
            //Callback
        });
        */
      }catch(e){
        
      }
      this.snappdCurrentStoryClipVideo = newAssetClip.querySelector('video');
      this.snappdCurrentStoryClipVideoIndex = clipIndex;
      newAssetClip.querySelector('video').addEventListener('timeupdate', this.updateProgressBar, false);
      newAssetClip.querySelector('video').onended = function() {
        
        
        window.snappd_didClickBeforeAction = false;
            
        var slideNumber = clipIndex+1;
        snappd_trackWidgetEvent('widget next slide', 'story number='+window.snappd_currentPlayingStoryNumber+';slide number='+parseInt(slideNumber+1)+';action type=auto;');
            
       that.mediaChangeElement(clipIndex+1);
      };
    }else{
      var ele = document.querySelector('.snappdWidget-timeline-holder .timeline-element:nth-child('+(clipIndex+1)+') div');
      this.animateElementWidth(ele);
      
      document.querySelector('.snappd-widget-story-spinner').removeAttribute("active");
        
      //Set Time For Photo
      this.snappdStoryPhotoTimer = setTimeout(function(){ 
        
        
        window.snappd_didClickBeforeAction = false;
        
        var slideNumber = clipIndex+1;
        snappd_trackWidgetEvent('widget next slide', 'story number='+window.snappd_currentPlayingStoryNumber+';slide number='+parseInt(slideNumber+1)+';action type=auto;');
        
        that.mediaChangeElement(clipIndex+1);
      }, that.photoDuration);
    }
    //Set new clip timeline progress
    this.updateStoryTimelineProgress(clipIndex);
  }
  /*Photo Progress Animation*/
  _snappd_widgetStoryPlayback.prototype.animateElementWidth = function(ele){
    var elem = ele;   
    _snappd_storyPlaybackAnimate({
      duration: this.photoDuration,
      timing(timeFraction) {
        return timeFraction;
      },
      draw(progress) {
        elem.style.width = progress * 100 + '%';
      }
    });
  }
  /*Video Progress Bar*/
  _snappd_widgetStoryPlayback.prototype.updateProgressBar = function(){
    var percentageSW = Math.floor((100 / this.duration) * this.currentTime);
    try{
      //Stop showling loading spinner
      var clipIndex = parseInt(this.dataset.clipindex);
      document.querySelector('.snappdWidget-timeline-holder .timeline-element:nth-child('+(clipIndex+1)+') div').style.width = percentageSW+'%';
      if(percentageSW >= 1){
        document.querySelector('.snappd-widget-story-spinner').removeAttribute("active");
      }
    }catch(e){
        
    }
  }
  /*Story Timeline Progress*/
  _snappd_widgetStoryPlayback.prototype.updateStoryTimelineProgress = function(index){
    var timelineElements = document.querySelectorAll('.snappdWidget-timeline-holder .timeline-element');
    var timelineIndex = 0;
    Array.from(timelineElements).forEach(timeline => {
      if(timelineIndex < index){
        timeline.querySelector('div').classList = 'viewed';
      }
      if(timelineIndex > index){
        timeline.querySelector('div').classList = 'unviewed';
      }
      if(timelineIndex == index){
        timeline.querySelector('div').classList = '';
      } 
      timelineIndex++;
    });
  };
  //Track widget seconds
  
  _snappd_widgetStoryPlayback.prototype.checkStoryPlayingSeconds = function(){
    //Update time playing for in seconds
    try{
      var ts = document.querySelector('.snappdOverlayBackground').dataset.timestamp;
      //compare with now
      var curTs = snappd_getCurrentTimestamp();
      var nSecs = 0;
      nSecs = Math.ceil((curTs-ts)/1000);
      //Set seconds
      var curSec = document.querySelector('.snappdOverlayBackground').dataset.seconds;
      if(curSec){
        curSec = parseInt(curSec);
        var tSecs = Math.ceil(curSec+nSecs);
        document.querySelector('.snappdOverlayBackground').dataset.seconds = tSecs;
      }else{
        document.querySelector('.snappdOverlayBackground').dataset.seconds = nSecs;
      }
      return document.querySelector('.snappdOverlayBackground').dataset.seconds;
    }catch(e){
      //error seconds..
    }
  }
  /*Close Player*/
  _snappd_widgetStoryPlayback.prototype.closeStoryPlayer = function(){
    if(this.playerOpen == true){
      clearTimeout(this.snappdStoryPhotoTimer);
      var storyVideoElements = document.querySelectorAll('.snappd-story-overlay-frame video');
      if(storyVideoElements.length != 0){
        Array.from(storyVideoElements).forEach(videoEle => {
          try{
            videoEle.pause();
            delete(videoEle);
            videoEle.remove();
          }catch(e){
            
          }
        });
      }
      
      //Update time playing for in seconds
      //this.checkStoryPlayingSeconds();
      
      document.querySelector(".snappdOverlayBackground").style.display = "none";
      document.querySelector(".snappd-story-overlay-frame").innerHTML = "";
      //Remove extra click listeners
      document.querySelector(".snappdOverlayBackground").outerHTML = document.querySelector(".snappdOverlayBackground").outerHTML;
    }
    this.playerOpen = false;
  }
  /*Set Event Listeners*/
  _snappd_widgetStoryPlayback.prototype.createStoryEventListeners = function(){
    var that = this;
    //check if event added
    
    
    var el =  document.querySelector(".snappd-story-overlay-frame");
    elClone = el.cloneNode(true);
    el.parentNode.replaceChild(elClone, el);
    
    var el =  document.querySelector(".snappdWidget-closePlayer");
    elClone = el.cloneNode(true);
    el.parentNode.replaceChild(elClone, el);
 
    document.querySelector(".snappdWidget-closePlayer").addEventListener("click", function(event) {
      //close clicked send event
      
        var timeSpent = that.checkStoryPlayingSeconds();
        var slideNumber = Math.ceil(that.snappdCurrentStoryClipIndex+1);
        snappd_trackWidgetEvent('widget end', 
       'story number='+parseInt(window.snappd_currentPlayingStoryNumber)+';slide number='+slideNumber+';time in widget='+timeSpent+';action type=user;');
       
       
       //Reset seconds count
        document.querySelector('.snappdOverlayBackground').removeAttribute("data-seconds");
        document.querySelector('.snappdOverlayBackground').removeAttribute("data-timestamp");
       
      //var timeSpent = that.checkStoryPlayingSeconds();
       //snappd_trackWidgetEvent('widget close click', 
       //'number of stories='+window.snappd_numStories+';story number='+window.snappd_currentPlayingStoryNumber+';time in widget='+timeSpent+';action type=close button;');
       
      that.closeStoryPlayer();
    });
    document.querySelector(".snappd-story-overlay-frame").addEventListener("click", function(event) {
      if(event.target.className == 'snappdWidget-closePlayer'){
        //close clicked send event
        
        var timeSpent = that.checkStoryPlayingSeconds();
        var slideNumber = Math.ceil(that.snappdCurrentStoryClipIndex+1);
        snappd_trackWidgetEvent('widget end', 
       'story number='+parseInt(window.snappd_currentPlayingStoryNumber)+';slide number='+slideNumber+';time in widget='+timeSpent+';action type=user;');
       
       
       //Reset seconds count
        document.querySelector('.snappdOverlayBackground').removeAttribute("data-seconds");
        document.querySelector('.snappdOverlayBackground').removeAttribute("data-timestamp");
        
        
        //var timeSpent = that.checkStoryPlayingSeconds();
        //snappd_trackWidgetEvent('widget close click', 
       //'number of stories='+window.snappd_numStories+';story number='+window.snappd_currentPlayingStoryNumber+';time in widget='+timeSpent+';action type=close button;');
       
        that.closeStoryPlayer();
      }
      if(event.target == this){
        //close clicked send event
        
        var timeSpent = that.checkStoryPlayingSeconds();
        var slideNumber = Math.ceil(that.snappdCurrentStoryClipIndex+1);
        snappd_trackWidgetEvent('widget end', 
       'story number='+parseInt(window.snappd_currentPlayingStoryNumber)+';slide number='+slideNumber+';time in widget='+timeSpent+';action type=user;');
       
       
       //Reset seconds count
        document.querySelector('.snappdOverlayBackground').removeAttribute("data-seconds");
        document.querySelector('.snappdOverlayBackground').removeAttribute("data-timestamp");
        
        
        //var timeSpent = that.checkStoryPlayingSeconds();
        //snappd_trackWidgetEvent('widget close click', 
       //'number of stories='+window.snappd_numStories+';story number='+window.snappd_currentPlayingStoryNumber+';time in widget='+timeSpent+';action type=close button;');
       
        that.closeStoryPlayer();
      }
    });
  }
}

//Event Tracking
if(typeof(snappd_trackWidgetEvent) === 'undefined'){
  function snappd_trackWidgetEvent(name, label){
    //use try block for safari
    try{
      if( typeof(window.ga) !== undefined){
        //Get query params from script url.
        var scriptUrlParams = document.querySelector('script#snappdEmbedWidget').src;
        var publisher = snappd_getRefQueryParam('partner', scriptUrlParams);
        
        var analytics_id = 'UA-134990023-1';
        
        ga('create', analytics_id, 'auto', 'snappd_widget_tracker');
        
        ga('snappd_widget_tracker.set', 'anonymizeIp', true);
        ga('snappd_widget_tracker.set', 'CD 94', publisher);
        ga('snappd_widget_tracker.set', 'dimension94', publisher);
        
        ga('snappd_widget_tracker.send', {
          //anonymizedIp: true,
          hitType: 'event',
          eventCategory: 'Snappd widget-'+window.location.host,
          eventAction: name,
          eventLabel: label,
          //'CD 94': publisher
        });
        
        if(name == 'widget embed'){
          //Also send one pageview
          ga('snappd_widget_tracker.send', {
            //anonymizedIp: true,
            hitType: 'pageview',
            location: window.location.host,
            page: window.location.pathname,
            //'CD 94': publisher
          });
        }
        //Send ext event
        snappd_trackWidgetEvent_ext(name, label);
      }
    }catch(e){
      
    }
  }
  function snappd_trackWidgetEvent_ext(name, label){
    
    if('russell' == '90min_football'){
      if( typeof(window.ga) !== undefined){
        
        //Get query params from script url.
        var scriptUrlParams = document.querySelector('script#snappdEmbedWidget').src;
        var publisher = snappd_getRefQueryParam('partner', scriptUrlParams);
        
        var analytics_id = 'UA-23669758-21';
        //XXXX-UA-XXXX-XX';
        
        ga('create', analytics_id, 'auto', 'snappd_widget_tracker_ext');
        
        ga('snappd_widget_tracker_ext.set', 'anonymizeIp', true);
        ga('snappd_widget_tracker_ext.set', 'CD 94', publisher);
        ga('snappd_widget_tracker_ext.set', 'dimension94', publisher);
        
        ga('snappd_widget_tracker_ext.send', {
          //anonymizedIp: true,
          hitType: 'event',
          eventCategory: 'Snappd widget',
          eventAction: name,
          eventLabel: label,
          //'CD 94':  publisher
        });
        
        if(name == 'widget embed'){
          //Also send one pageview
          ga('snappd_widget_tracker_ext.send', {
            //anonymizedIp: true,
            hitType: 'pageview',
            location: window.location.host,
            page: window.location.pathname,
            //'CD 94':  publisher
          });
        }
      }
    }
  }
  //check if need to load analytics...
  try{
    if( window.ga.loaded == true){
      //do nothing
    }else{
      //load ga
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    }
  }catch(e){
    //load ga
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
}

var _snappdHighlightWidget = function (type, instagramId, elementClass) {
     //console.log('instance created');
     this.id = 'snappd_'+this.uuid();
     this.elementClass = elementClass;
     this.version = '0.0.1';
     this.instagramId = instagramId;
     this.setup();
};
_snappdHighlightWidget.prototype.uuid = function(){
  var dt = new Date().getTime();
  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = (dt + Math.random()*16)%16 | 0;
    dt = Math.floor(dt/16);
    return (c=='x' ? r :(r&0x3|0x8)).toString(16);
  });
  return uuid;
};
/*_snappdHighlightWidget.prototype.async = function(u, c) {
    var d = document, t = 'script',
    o = d.createElement(t),
    s = d.getElementsByTagName(t)[0];
    o.src = '//' + u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
}*/
_snappdHighlightWidget.prototype.setup = function(){
    
    //Check if variables set.
    if (window.SNAPPDWidgetSettings === undefined) {
        window.SNAPPDWidgetSettings = {};
        SNAPPDWidgetSettings.size = "default"; //default / small / large
        SNAPPDWidgetSettings.width = "auto"; //auto / NUMpx (max width) / NUM% (max width)
        SNAPPDWidgetSettings.border = "825aff"; //HEX Colour
        SNAPPDWidgetSettings.hover = "5b28f9"; //HEX Colour
    }

    SNAPPDWidgetSettings = window.Snappd_Highlight_Widget['eO1VLWTKO8cmWdvDPvvTgXhEoVa2'];
    SnappdWidgetStorySize = SNAPPDWidgetSettings.size+'px';
    
    //For 90min check if set rectangle size for mobile only or decktop and mobile
    //console.log('show first '+SNAPPDWidgetSettings.number+' stories only__');
    var displayType = '';
    if(SNAPPDWidgetSettings.shape == 'rectangle'){
        displayType = 'storiesWidgetThemeThumbsCircle';
    }
    
    var storyDataElement = document.createElement('textarea');
    storyDataElement.innerHTML = '[{&quot;webm&quot;:&quot;&quot;,&quot;links&quot;:[&quot;&quot;],&quot;clipsThumbs&quot;:[&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2FBA670958-6AD1-D712-181571673665-0.jpg?alt=media&amp;token=96f3ea1c-36e8-d91a-308e7fc495ab&quot;],&quot;animatedCover&quot;:&quot;-&quot;,&quot;short&quot;:&quot;Sc1571673669&quot;,&quot;tagline&quot;:&quot;Russell%20Barnard%20-%20Monday%2021st%20October&quot;,&quot;thumb&quot;:&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fthumbnail%2FBA670958-6AD1-D712-181571673665.jpg?alt=media&amp;token=403ef26b-82a3-1fec-7852d0c93416&quot;,&quot;video&quot;:&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2FBA670958-6AD1-D712-181571673665.mp4?alt=media&amp;token=89ec40d3-dc2f-bec7-70c1db59e63f&quot;,&quot;uploaded&quot;:&quot;1571673606&quot;,&quot;fileTypes&quot;:[&quot;video&quot;],&quot;usingClips&quot;:1,&quot;clips&quot;:[&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2FBA670958-6AD1-D712-181571673665-0.mp4?alt=media&amp;token=3d56097b-9dae-d5f1-89abd142cf50&quot;]},{&quot;webm&quot;:&quot;&quot;,&quot;links&quot;:[&quot;&quot;,&quot;&quot;,&quot;&quot;],&quot;clipsThumbs&quot;:[&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2FAF4CD93E-96EC-FBEC-1E1571500924-0.jpg?alt=media&amp;token=83dcb579-8b19-6a2d-ab8c6e27015d&quot;,&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2FAF4CD93E-96EC-FBEC-1E1571500924-1.jpg?alt=media&amp;token=4eb970cd-7c05-4531-04c2f61dbe83&quot;,&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2FAF4CD93E-96EC-FBEC-1E1571500924-2.jpg?alt=media&amp;token=c475a213-e156-516d-9a6832b57c41&quot;],&quot;animatedCover&quot;:&quot;-&quot;,&quot;short&quot;:&quot;S41571500933&quot;,&quot;tagline&quot;:&quot;Russell%20Barnard%20-%20Saturday%2019th%20October&quot;,&quot;thumb&quot;:&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fthumbnail%2FAF4CD93E-96EC-FBEC-1E1571500924.jpg?alt=media&amp;token=cfb21de4-9d07-d560-c5e7baf4d208&quot;,&quot;video&quot;:&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2FAF4CD93E-96EC-FBEC-1E1571500924.mp4?alt=media&amp;token=4978b6e1-87b0-7305-4736cba98e1f&quot;,&quot;uploaded&quot;:&quot;1571500806&quot;,&quot;fileTypes&quot;:[&quot;video&quot;,&quot;video&quot;,&quot;video&quot;],&quot;usingClips&quot;:1,&quot;clips&quot;:[&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2FAF4CD93E-96EC-FBEC-1E1571500924-0.mp4?alt=media&amp;token=43ea958c-0de4-5ae3-069f1b24a378&quot;,&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2FAF4CD93E-96EC-FBEC-1E1571500924-1.mp4?alt=media&amp;token=b8450eaf-f095-8f4b-7a50f9246ed3&quot;,&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2FAF4CD93E-96EC-FBEC-1E1571500924-2.mp4?alt=media&amp;token=1bfd85a0-7903-851e-b9a06c7e3d52&quot;]},{&quot;webm&quot;:&quot;&quot;,&quot;links&quot;:[&quot;&quot;],&quot;clipsThumbs&quot;:[&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F0D5FABE7-D451-0FD2-061571414463-0.jpg?alt=media&amp;token=3e5a96c2-8ed4-db34-7a5d64cefb02&quot;],&quot;animatedCover&quot;:&quot;-&quot;,&quot;short&quot;:&quot;S01571414473&quot;,&quot;tagline&quot;:&quot;Russell%20Barnard%20-%20Friday%2018th%20October&quot;,&quot;thumb&quot;:&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fthumbnail%2F0D5FABE7-D451-0FD2-061571414463.jpg?alt=media&amp;token=f81ead4c-a971-a301-0694b7af82d5&quot;,&quot;video&quot;:&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F0D5FABE7-D451-0FD2-061571414463.mp4?alt=media&amp;token=5c6e308d-ec5b-3572-72bce64931df&quot;,&quot;uploaded&quot;:&quot;1571414406&quot;,&quot;fileTypes&quot;:[&quot;video&quot;],&quot;usingClips&quot;:1,&quot;clips&quot;:[&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F0D5FABE7-D451-0FD2-061571414463-0.mp4?alt=media&amp;token=1b475263-a490-b43c-eb6398c0fad4&quot;]},{&quot;webm&quot;:&quot;&quot;,&quot;links&quot;:[&quot;&quot;],&quot;clipsThumbs&quot;:[&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F0ECA4762-68F2-29F4-4C1570896063-0.jpg?alt=media&amp;token=af364085-8102-2bc9-8fe2a0cd6437&quot;],&quot;animatedCover&quot;:&quot;-&quot;,&quot;short&quot;:&quot;Se1570896068&quot;,&quot;tagline&quot;:&quot;Russell%20Barnard%20-%20Saturday%2012th%20October&quot;,&quot;thumb&quot;:&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fthumbnail%2F0ECA4762-68F2-29F4-4C1570896063.jpg?alt=media&amp;token=4b30e516-a801-2e49-5d6f7c1409ae&quot;,&quot;video&quot;:&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F0ECA4762-68F2-29F4-4C1570896063.mp4?alt=media&amp;token=17bdc58a-da25-fc67-3a857291e6dc&quot;,&quot;uploaded&quot;:&quot;1570896006&quot;,&quot;fileTypes&quot;:[&quot;video&quot;],&quot;usingClips&quot;:1,&quot;clips&quot;:[&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F0ECA4762-68F2-29F4-4C1570896063-0.mp4?alt=media&amp;token=92d4b0c1-0c3d-6178-8cb3d9a1e52f&quot;]},{&quot;webm&quot;:&quot;&quot;,&quot;links&quot;:[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],&quot;clipsThumbs&quot;:[&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F50CF9DB6-A4F5-F3CE-2E1570809784-0.jpg?alt=media&amp;token=b45a30fc-1fe2-06f2-670c2f439d85&quot;,&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F50CF9DB6-A4F5-F3CE-2E1570809784-1.jpg?alt=media&amp;token=ca972b8d-1845-df8e-612c3bea9805&quot;,&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F50CF9DB6-A4F5-F3CE-2E1570809784-2.jpg?alt=media&amp;token=83270fca-2068-db38-9f80e1752d6a&quot;,&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F50CF9DB6-A4F5-F3CE-2E1570809784-3.jpg?alt=media&amp;token=7148ad9f-4a28-e28d-4f251a8c90ed&quot;],&quot;animatedCover&quot;:&quot;-&quot;,&quot;short&quot;:&quot;S41570809796&quot;,&quot;tagline&quot;:&quot;Russell%20Barnard%20-%20Friday%2011th%20October&quot;,&quot;thumb&quot;:&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fthumbnail%2F50CF9DB6-A4F5-F3CE-2E1570809784.jpg?alt=media&amp;token=5c4a1e87-7865-9a20-f95480d6137c&quot;,&quot;video&quot;:&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F50CF9DB6-A4F5-F3CE-2E1570809784.mp4?alt=media&amp;token=c7e8d1b2-da74-41c3-0a9853fc2b14&quot;,&quot;uploaded&quot;:&quot;1570809612&quot;,&quot;fileTypes&quot;:[&quot;video&quot;,&quot;video&quot;,&quot;video&quot;,&quot;video&quot;],&quot;usingClips&quot;:1,&quot;clips&quot;:[&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F50CF9DB6-A4F5-F3CE-2E1570809784-0.mp4?alt=media&amp;token=49cb3ef1-340c-520b-5102743c8fd9&quot;,&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F50CF9DB6-A4F5-F3CE-2E1570809784-1.mp4?alt=media&amp;token=b83f5c14-f091-3ab2-da8173495bc0&quot;,&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F50CF9DB6-A4F5-F3CE-2E1570809784-2.mp4?alt=media&amp;token=3e9d47a8-6b1c-acb9-9128d3f4ea60&quot;,&quot;https:\/\/firebasestorage.googleapis.com\/v0\/b\/snappd-6be54.appspot.com\/o\/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Fvideo%2F50CF9DB6-A4F5-F3CE-2E1570809784-3.mp4?alt=media&amp;token=d5298a03-38bc-85f2-e92408fa16b7&quot;]}]';
    storyDataElement.id = 'snappd-widget-elements-data';
    var storyDataElements = JSON.parse(storyDataElement.innerHTML);

    var snappdDivHolder = document.getElementById("snappdEmbedWidget");
    var snappdWidgetHMTL = '<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">';
    
    
    if(this.instagramId == '90min_football'){
    
      snappdWidgetHMTL += '<div class="left-arrow"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" version="1.1" style="height: 30px;width: 20px;shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;" viewBox="0 0 333 416.25" x="0px" y="0px" fill-rule="evenodd" clip-rule="evenodd"><defs><style type="text/css"> .fil0 {fill:#d9d9d9} </style></defs><g><path class="fil0" d="M250 44l-123 123 123 122c19,20 -10,49 -29,30l-138 -138c-8,-8 -8,-20 0,-29l138 -137c19,-20 48,10 29,29z"/></g></svg></div>';
    
    }
    
    
    
    //TODO - add animated-cover
    
    var limitStoriesClass = '';
    if(SNAPPDWidgetSettings.number == 1){
      limitStoriesClass = 's_show-one';
    }
    if(SNAPPDWidgetSettings.number == 5){
      limitStoriesClass = 's_show-five';
    }
    if(SNAPPDWidgetSettings.number == 10){
      limitStoriesClass = 's_show-ten';
    }
    if(SNAPPDWidgetSettings.number == 20){
      limitStoriesClass = 's_show-twenty';
    }
    var widgetAlignment = 'left';
    widgetAlignment = SNAPPDWidgetSettings.alignment;
    snappdWidgetHMTL += '  <div class="snappdWidget">'
    +'  <div class="snappd-stories-holder '+limitStoriesClass+'" style="text-align:'+widgetAlignment+'">';
    
    if (typeof(localStorage) !== "undefined") {
      if (localStorage.snappd_ViewedStories) {
        var viewedStoriesList = localStorage.snappd_ViewedStories.split(',');
      } else {
        localStorage.snappd_ViewedStories = '';
        var viewedStoriesList = localStorage.snappd_ViewedStories.split(',')
      }
      viewedStoriesList = '';
      for(istory in storyDataElements){
        
        if(isNaN(istory) == false){
          var sEle = storyDataElements[istory];
          var viewed = '';
          if(viewedStoriesList.includes(sEle.short)){
            viewed = 'viewed';
          }
          
          if(sEle.animatedCover != '-'){
            if(istory == 0){
              //No Gif cover for new display on QA
              //sEle.thumb = sEle.animatedCover;
            }
          }
          try{
            snappdWidgetHMTL += '<div title="Click to watch story" data-animatedCover="'+sEle.animatedCover+'" class="'+viewed+' snappd-story-circle snappd-story-border '+displayType+'" data-clipsThumbs="'+sEle.clipsThumbs.join(',')+'" data-storyLinks="'+sEle.links.join(',')+'" data-fileTypes="'+sEle.fileTypes.join(',')+'" data-uploaded="'+sEle.uploaded+'" data-story-id="'+sEle.short+'" style="display:none;background-image:url('+sEle.thumb+')" data-video-thumb-path="'+sEle.thumb+'" data-video-play-path="'+sEle.video+'" data-video-webm-path="'+sEle.webm+'"><div class="snappd-story-tagline" style="display:none;">'+sEle.tagline+'</div><textarea style="display:none;">'+JSON.stringify(sEle.clips)+'</textarea></div>';
          }catch(e){
            //snappdWidgetHMTL += '<div title="Click to watch story" data-animatedCover="'+sEle.animatedCover+'" class="'+viewed+' snappd-story-circle snappd-story-border '+displayType+'" data-clipsThumbs="none" data-storyLinks="none" data-fileTypes="none" data-uploaded="'+sEle.uploaded+'" data-story-id="'+sEle.short+'" style="display:none;background-image:url('+sEle.thumb+')" data-video-thumb-path="'+sEle.thumb+'" data-video-play-path="'+sEle.video+'" data-video-webm-path="'+sEle.webm+'"><div class="snappd-story-tagline" style="display:none;">'+sEle.tagline+'</div><textarea style="display:none;">'+JSON.stringify(sEle.clips)+'</textarea></div>';
          }
        }
      }
    } else {
      for(istory in storyDataElements){
        if(isNaN(istory) == false){
          var sEle = storyDataElements[istory];
          
          
          if(sEle.animatedCover != '-'){
            if(istory == 0){
              sEle.thumb = sEle.animatedCover;
            }
          }
          
          try{
          snappdWidgetHMTL += '<div title="Click to watch story" data-animatedCover="'+sEle.animatedCover+'" class="snappd-story-circle snappd-story-border '+displayType+'" data-clipsThumbs="'+sEle.clipsThumbs.join(',')+'" data-storyLinks="'+sEle.links.join(',')+'" data-fileTypes="'+sEle.fileTypes.join(',')+'" data-uploaded="'+sEle.uploaded+'" data-story-id="'+sEle.short+'" style="display:none;background-image:url('+sEle.thumb+')" data-video-thumb-path="'+sEle.thumb+'" data-video-play-path="'+sEle.video+'" data-video-webm-path="'+sEle.webm+'"><div class="snappd-story-tagline" style="display:none;">'+sEle.tagline+'</div><textarea style="display:none;">'+JSON.stringify(sEle.clips)+'</textarea></div>';
          }catch(e){
            
            //snappdWidgetHMTL += '<div title="Click to watch story" data-animatedCover="'+sEle.animatedCover+'" class="'+viewed+' snappd-story-circle snappd-story-border '+displayType+'" data-clipsThumbs="none" data-storyLinks="none" data-fileTypes="none" data-uploaded="'+sEle.uploaded+'" data-story-id="'+sEle.short+'" style="display:none;background-image:url('+sEle.thumb+')" data-video-thumb-path="'+sEle.thumb+'" data-video-play-path="'+sEle.video+'" data-video-webm-path="'+sEle.webm+'"><div class="snappd-story-tagline" style="display:none;">'+sEle.tagline+'</div><textarea style="display:none;">'+JSON.stringify(sEle.clips)+'</textarea></div>';
          }
        }
      }
    }
    
    
    /*for(istory in storyDataElements){
      if(isNaN(istory) == false){
        var sEle = storyDataElements[istory];
        snappdWidgetHMTL += '<div title="Click to watch story" class="snappd-story-circle snappd-story-border '+displayType+'" data-clipsThumbs="'+sEle.clipsThumbs.join(',')+'" data-storyLinks="'+sEle.links.join(',')+'" data-fileTypes="'+sEle.fileTypes.join(',')+'" data-uploaded="'+sEle.uploaded+'" data-story-id="'+sEle.short+'" style="display:none;background-image:url('+sEle.thumb+')" data-video-thumb-path="'+sEle.thumb+'" data-video-play-path="'+sEle.video+'" data-video-webm-path="'+sEle.webm+'"><div class="snappd-story-tagline" style="display:none;">'+sEle.tagline+'</div><textarea style="display:none;">'+JSON.stringify(sEle.clips)+'</textarea></div>';
      }
    }*/

    snappdWidgetHMTL += '</div>'
    +'</div>';
    
    if(this.instagramId == '90min_football'){
    
      snappdWidgetHMTL += '<div class="right-arrow"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" version="1.1" style="transform: rotate(180deg);height: 30px; position:relative; top: -5px;width: 20px;shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;" viewBox="0 0 333 416.25" x="0px" y="0px" fill-rule="evenodd" clip-rule="evenodd"><defs><style type="text/css"> .fil0 {fill:#979797} </style></defs><g><path class="fil0" d="M250 44l-123 123 123 122c19,20 -10,49 -29,30l-138 -138c-8,-8 -8,-20 0,-29l138 -137c19,-20 48,10 29,29z"/></g></svg></div>';
    }
    
    var storyDisplay = document.createElement("div");
    storyDisplay.className = 'snappdOverlayBackground';
    storyDisplay.innerHTML = '<img class="snappdWidget-closePlayer" src="https://firebasestorage.googleapis.com/v0/b/snappd-6be54.appspot.com/o/widget%2Fimg%2FclosePlayer.svg?alt=media&token=snappd-widget-cloud-new">'
    +'<div class="snappd-story-overlay-frame"></div>';
    document.body.appendChild(storyDisplay);
    
    //check if  obj.aspectHeight set otherwise use defaults
    if(SNAPPDWidgetSettings.aspectHeight == 0){
      var storyWidth = '109';
      var storyHeight = '194';
    }else{
      var storyWidth = parseInt(SnappdWidgetStorySize);
      var storyHeight = SNAPPDWidgetSettings.aspectHeight;
    }

    var snappdWidgetPlayerDiv = '<style>'
    +'.snappdWidget{'
    +'  width: 100%;'
    +'  max-width '+SNAPPDWidgetSettings.width+';'
    +'  overflow: auto;'
    +'  white-space:nowrap;' 
    // +'  overflow: scroll;'
    +'  overflow-y:hidden;'
    +'}';
    if('0' == '1'){
        snappdWidgetPlayerDiv += '.snappdWidget{overflow: hidden;overflow-y: hidden;overflow-x: hidden;}';
    }
    snappdWidgetPlayerDiv += '.snappdWidget .snappd-stories-holder{'
    +'  /*width: 1000px;*/'
    +'}'
    +'.snappdWidget .snappd-stories-holder .snappd-story-circle{'
    +'  display:inline-block;'
    +'  border-radius: 100%;'
    +'  margin-right: 5px;'
    +'  height:'+SnappdWidgetStorySize+';'
    +'  width:'+SnappdWidgetStorySize+';'
    +'  border:2px solid;'
    +'  cursor: pointer;'
    +'  background: grey;'
    +'  background-size: cover;'
    +'  background-position: center;'
    +'  padding: 2px;'
    +'  background-clip: content-box;'
    +'  background-color: #fff;'
    +'}'
    +'.snappdWidget .snappd-stories-holder .snappd-story-circle.snappd-myprofile a{'
    +'  display:block;'
    +'  height:'+SnappdWidgetStorySize+';'
    +'  width:'+SnappdWidgetStorySize+';'
    +'}'
    +'.snappdWidget .snappd-stories-holder .snappd-story-circle.snappd-story-border{'
    +'  border: 2px solid #'+SNAPPDWidgetSettings.border+';'
    +'  box-shadow: inset 0 0 0 2px white;'
    +'}'
    +'.snappdWidget .snappd-stories-holder .snappd-story-circle.snappd-story-border:hover{'
    +'  border:2px solid #'+SNAPPDWidgetSettings.hover+';'
    +'}'
    +'.snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle{'
    +'    width: '+storyWidth+'px!important;'
    +'    height: '+storyHeight+'px!important;'
    +'    border-radius: 4px!important;'
    //  +'    border-width: 0.5px!important;'
  +'    background-size: cover!important;'
  +'    overflow: hidden!important;'
  +'    box-shadow: none!important;'
  // +'    border: none!important;'
  +'     margin-right: 10px;'
  +'     padding: 0px;'
  
  +'}'
  
  //Limit number of stories to display
  +'.snappdWidget .snappd-stories-holder.s_show-one .snappd-story-border{'
  +'    display:none!important;'
  +'}'
  +'.snappdWidget .snappd-stories-holder.s_show-one .snappd-story-border:nth-child(-n+1){'
  +'    display:inline-block!important;'
  +'}'
  +'.snappdWidget .snappd-stories-holder.s_show-five .snappd-story-border{'
  +'    display:none!important;'
  +'}'
  +'.snappdWidget .snappd-stories-holder.s_show-five .snappd-story-border:nth-child(-n+5){'
  +'    display:inline-block!important;'
  +'}'
  +'.snappdWidget .snappd-stories-holder.s_show-ten .snappd-story-border{'
  +'    display:none!important;'
  +'}'
  +'.snappdWidget .snappd-stories-holder.s_show-ten .snappd-story-border:nth-child(-n+10){'
  +'    display:inline-block!important;'
  +'}'
  +'.snappdWidget .snappd-stories-holder.s_show-twenty .snappd-story-border{'
  +'    display:none!important;'
  +'}'
  +'.snappdWidget .snappd-stories-holder.s_show-twenty .snappd-story-border:nth-child(-n+20){'
  +'    display:inline-block!important;'
  +'}'
  
  
  +'.snappd-watermark-holder{display: flex;position: absolute;bottom: 0px;z-index: 99999999999;right: 0px;}'
  +'.snappd-watermark-holder img{height: 23px;margin-right: 5px;margin-bottom: 5px;opacity:0.4; transition: all 0.3s ease-in-out;}'
  +'.snappd-watermark-holder img:hover{opacity:1;}'
    
    
  + '.snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle:hover {'
  +'    opacity: 0.8;'
  +'}';
  
  if(this.instagramId == 'vigorsolitalia'){
    //Set widget rectangle sizing.
    //for desktop: 270x480 and for mobile: 180x320
    
    snappdWidgetPlayerDiv += 'body .snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle{'
    +'  height:480px!important;'
    +'  width:270px!important;'
    +'}'
    +'@media screen and (max-width: 450px){'
    +'  body .snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle{'
    +'   height:320px!important;'
    +'   width:180px!important;'
    +' }'
    +'}';
  }
  
  if(this.instagramId == '90min_football'){
    
    snappdWidgetPlayerDiv += 'div#snappdEmbedWidget{'
    +'  display: flex;'
    +'  align-items: center;'
    //+'  height: 176px;'
    +'  margin:0px!important;'
    +'}'
    +'.snappd_holderTitle{'
    +'  font-size: 16px;'
    +'  line-height: 16px;'
    +'  padding-left:20px;'
    +'  padding-bottom: 13px;'
    +'  padding-top: 9px;'
    +'  color: #0c081b;'
    +'  font-family: \'Roboto\', serif;'
    +'}'
    +'.snappdWidget .snappd-stories-holder .snappd-story-circle.snappd-story-border.viewed {'
    +'  opacity: 0.70;'
    +'  -webkit-filter: grayscale(100%);'
    +'  filter: grayscale(100%);'
    +'}'
    +'.snappdWidget{'
    +'  overflow:hidden!important;scroll-behavior: smooth;'
    +'}'
    +'.snappdOuterHolder{'
    +'    padding: 0px;/*5px;*/'
    +'    background: #f7f7f7;'
    +'    max-width: 679px;'
    +'    border-radius: 3px 2px 2px 2px;'
    +'    padding-left: 0px;'
    +'    padding-bottom: 0px;'
    +'    padding-top: 5px;'
    //+'    height: 234px;'
    +'    margin: 0 auto;'
    +'}'
    +'.snappdOuterHolder .snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle {'
    +'    width: 114px!important;'
    +'    height: 174px!important;'
    +'    border-radius: 2px!important;'
    +'    margin-right: 16px!important;'
    +'    box-sizing: border-box;'
    +'}'
    +'div#snappdEmbedWidget .left-arrow{'
    //+'    margin-right: 1.25px;'
    +'    opacity:0.5;'
    +'}'
    
    
    +'div#snappdEmbedWidget .left-arrow{'
    +' position:relative; right:2.5px;'
    +'}'
    +'div#snappdEmbedWidget .right-arrow{'
    +' position:relative; left:2.5px;'
    +'}'
    
    +'div#snappdEmbedWidget .left-arrow, div#snappdEmbedWidget  .right-arrow{'
    +'  padding:0px;'
    +'  margin:0px;'
    +'  padding-right: 3px;'
    +'  padding-left: 3px;'
    +'  cursor:pointer;-webkit-user-select: none; /* Safari */'    
    +'  -moz-user-select: none; /* Firefox */'
    +'  -ms-user-select: none; /* IE10+/Edge */'
    +'  user-select: none; /* Standard */'
    +'}'
    +'.snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle::after {'
    +'height: 35px;'
    +'width: 40px;'
    +'position: relative;'
    +'bottom: 27px;'
    +'left: 4px;'
    +'content: "";'
    +'z-index: 999999;'
    +'display: block;'
    +'border-radius: 100%;'
    +'border: none;'
    +"background-image: url(\"data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E %3C!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3E %3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E %3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='283.442px' height='69.73px' viewBox='0.018 106.866 283.442 69.73' enable-background='new 0.018 106.866 283.442 69.73' xml:space='preserve'%3E %3Cg%3E %3Cg%3E %3Cpolygon fill='%23FFFFFF' points='210.742,132.999 212.535,123.311 212.954,121.278 210.861,121.278 198.482,121.278 197.046,121.278 196.807,122.713 194.833,132.999 '/%3E %3C/g%3E %3Cg%3E %3Cpolygon fill='%23FFFFFF' points='281.367,121.278 269.048,121.278 267.613,121.278 267.314,122.653 260.794,157.218 236.576,121.996 236.037,121.278 235.14,121.278 218.754,121.278 217.32,121.278 217.021,122.653 207.333,174.382 206.914,176.416 209.007,176.416 221.386,176.416 222.822,176.416 223.121,175.04 229.818,139.278 254.516,175.697 255.054,176.416 255.951,176.416 271.679,176.416 273.115,176.416 273.353,175.04 283.101,123.311 283.46,121.278 '/%3E %3C/g%3E %3Cg%3E %3Cpolygon fill='%23FFFFFF' points='194.056,137.245 187.06,174.441 186.701,176.474 188.794,176.474 201.113,176.474 202.548,176.474 202.847,175.04 209.964,137.245 '/%3E %3C/g%3E %3Cg%3E %3Cpath fill='%23FFFFFF' d='M190.587,121.278h-18.658h-0.896l-0.538,0.718l-23.622,33.429l-10.645-32.951l-0.358-1.196h-1.256h-22.426 c1.555,2.452,2.811,5.083,3.768,7.834c1.435,4.186,2.153,8.611,2.153,13.097c-0.06,4.484-0.837,8.851-2.333,13.037 c-1.495,4.006-3.588,7.773-6.279,11.123c-2.691,3.349-5.861,6.159-9.449,8.432c-0.957,0.598-1.914,1.137-2.871,1.674h20.631h1.436 l0.239-1.435l6.817-36.419l11.123,36.598l0.359,1.197h1.256h8.611h0.897l0.538-0.777l24.758-36.479l-6.578,35.224l-0.359,2.033 H169h11.781h1.436l0.238-1.436l9.748-51.729l0.359-2.033h-1.975V121.278z'/%3E %3C/g%3E %3Cg%3E %3Cg%3E %3Cpath fill='%23FF9900' d='M111.889,130.547c-1.256-3.588-3.11-6.997-5.442-9.987c-2.332-2.99-5.143-5.562-8.312-7.654 c-3.229-2.093-6.758-3.708-10.465-4.605c-2.811-0.718-5.681-1.076-8.552-1.076c-10.705,0-20.333,4.903-26.671,12.558 c2.332,4.485,3.468,9.628,3.05,14.711c-0.239,2.571-0.777,5.023-1.675,7.415c-0.478,1.196-0.957,2.392-1.555,3.528 c-0.359,0.719-0.718,1.376-1.136,2.034c-1.315,2.511-2.631,5.022-3.947,7.534c0,0.061-0.06,0.12-0.06,0.18 c1.555,3.768,3.768,7.236,6.519,10.166c2.751,2.99,5.98,5.502,9.568,7.355c3.648,1.914,7.655,3.17,11.781,3.648 c4.066,0.479,8.193,0.239,12.14-0.658c3.768-0.896,7.296-2.392,10.585-4.484c3.169-2.033,6.04-4.605,8.432-7.535 c2.392-2.99,4.306-6.339,5.622-9.928c1.375-3.707,2.033-7.654,2.093-11.601C113.803,138.261,113.205,134.255,111.889,130.547z M97.955,149.803c-1.495,3.528-3.947,6.578-7.057,8.731c-3.169,2.271-6.937,3.527-10.824,3.768c-0.299,0-0.658,0-0.957,0 c-3.887,0-7.774-1.137-11.063-3.23c-3.169-2.033-5.801-5.022-7.416-8.432c-1.674-3.588-2.332-7.595-1.794-11.542 c0.539-3.827,2.153-7.475,4.605-10.405c2.452-2.93,5.741-5.143,9.329-6.279c3.768-1.196,7.894-1.315,11.721-0.239 c3.708,1.017,7.056,3.05,9.628,5.861c2.571,2.811,4.365,6.339,5.083,10.106C99.929,142.089,99.45,146.156,97.955,149.803z M49.815,124.626c-1.196-3.647-3.169-6.997-5.801-9.748s-5.861-4.904-9.389-6.279c-2.87-1.137-5.98-1.734-9.09-1.734 c-3.947,0-7.834,0.897-11.362,2.691c-3.409,1.674-6.398,4.126-8.731,7.116c-2.392,2.99-4.066,6.579-4.844,10.346 c-0.837,3.828-0.777,7.954,0.239,11.781c0.957,3.708,2.811,7.176,5.262,10.106c2.452,2.871,5.562,5.203,9.09,6.758 c2.99,1.316,6.279,2.094,9.568,2.152l-8.492,16.146l-1.316,2.512h2.871h12.2h1.076l0.479-0.896 c0.538-1.017,1.017-2.033,1.555-3.05c1.255-2.452,2.511-4.903,3.767-7.355c1.555-2.99,3.11-6.04,4.725-9.03 c1.435-2.631,2.871-5.322,4.306-8.014c0.598-1.136,1.256-2.271,1.854-3.408c1.196-2.272,2.093-4.665,2.631-7.176 C51.37,133.238,51.13,128.753,49.815,124.626z M35.881,136.707l-0.538,1.077l-0.359,0.658c-2.332,3.648-6.638,5.682-10.943,5.143 c-3.828-0.479-7.236-2.99-8.791-6.518c-1.615-3.588-1.196-7.894,1.076-11.123c2.093-2.93,5.562-4.724,9.15-4.724 c3.887,0,7.595,2.093,9.628,5.382C36.958,129.59,37.256,133.417,35.881,136.707z'/%3E %3C/g%3E %3C/g%3E %3C/g%3E %3C/svg%3E\");"
    +'    background-size: contain;'
    +'    background-position: center;'
    +'    background-repeat: no-repeat;'
    +'}'
    +'@media screen and (max-width: 450px){'
    +'  .left-arrow, .right-arrow{'
    +'    display:none;'
    +'  }'
    +'  div#snappdEmbedWidget .snappdWidget{'
    +'    overflow-x:auto!important;'
    +'  }'
    +'}'
    +'.snappdOuterHolder .snappd-stories-holder {'
    +'  padding-left: 0px/*6.5px;*/'
    +'}'
    
    
    //Design tweaks for 90min
    
    //Desktop and mobile
    +'.snappdOuterHolder{'
    +'  margin: 24px 0px 24px 0px;'
    +'}'
    +'.snappdOuterHolder .snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle{'
    +'  margin-right:12px!important;'
    +'}'
    //Desktop display only
    +'@media screen and (min-width: 450px){'
    +'  .snappdOuterHolder{'
    +'    max-width:100%;'
    +'  }'
    +'  .snappdOuterHolder .snappd_holderTitle { padding-left: 32px; }'
    +'}'
    //Mobile display only
    +'@media screen and (max-width: 450px){'
    +'  .snappdOuterHolder{'
    +'    position:relative;'
    +'    left:-4.16667%;'
    +'    width:100vw!important;'
    +'    box-sizing:initial!important;'
    +'  }'
    +'  .snappdOuterHolder .story_snappdOuterHolder:first-of-type {'
    +'    margin-left: 15px;'
    +'  }'
    +'  .snappdOuterHolder .story_snappdOuterHolder-circle:first-of-type {'
    +'    padding-left: 15px;'
    +'  }'
    +'  .snappdOuterHolder .snappd_holderTitle{'
    +'    padding-left:20px;'
    +'  }'
    +'  .snappdOuterHolder .snappd-stories-holder {'
    +'    padding-left: 0px;'
    +'  }'
    +'}'
  
  //Add gradient border
  +'.snappdOuterHolder .snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle{'
  +'  border-radius:4px!important;'
  +'  padding:2px!important;'
  +'  border-width:0px!important;'
  +'}'
  +'.snappdOuterHolder .story_snappdOuterHolder {'
  +'    display: inline-block;'
  +'    width: 114px;'
  +'    margin-right: 12px;'
  +'    height: 174px!important;'
  +'    border-radius: 4px;'
  +'    background: rgb(255,169,0);'
  +'    background: -moz-linear-gradient(180deg, rgba(255,169,0,1) 0%, rgba(238,206,165,1) 100%);'
  +'    background: -webkit-linear-gradient(180deg, rgba(255,169,0,1) 0%, rgba(238,206,165,1) 100%);'
  +'    background: linear-gradient(180deg, rgba(255,169,0,1) 0%, rgba(238,206,165,1) 100%);'
  +'    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffa900",endColorstr="#eecea5",GradientType=1);'
  +'    box-sizing:border-box;'
  +'}'
  +'.snappdOuterHolder .story_snappdOuterHolder.viewed{'
  +'    background: rgb(125,125,125);'
  +'    background: -moz-linear-gradient(180deg, rgba(125,125,125,1) 0%, rgba(182,182,182,1) 100%);'
  +'    background: -webkit-linear-gradient(180deg, rgba(125,125,125,1) 0%, rgba(182,182,182,1) 100%);'
  +'    background: linear-gradient(180deg, rgba(125,125,125,1) 0%, rgba(182,182,182,1) 100%);'
  +'    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#7d7d7d",endColorstr="#b6b6b6",GradientType=1);'
  +'}';
  
  //fix vertical alignment
  snappdWidgetPlayerDiv += '.snappdOuterHolder .snappdWidget {'
  +'  padding-top: 16px;'
  +'  padding-bottom: 16px;'
  +'}'
  +'.snappdOuterHolder .snappd-stories-holder{'
  +' height:174px;'
  +'}';
  
  
  //Update styling
  snappdWidgetPlayerDiv += '.snappdOuterHolder{'
  +'  padding-top:0px!important;'
  +'  background: #e9eefc!important;'
  +'}'
  +'.snappdOuterHolder .story_snappdOuterHolder-circle{'
  +'  display:inline-block;'
  +'  margin-right: 12px;'
  +'}'
  //Make box height smaller if circles
  +'div#snappdEmbedWidget.circles, .snappdOuterHolder.circles{'
  +'  height:auto!important;'
  +'}'
  +'.snappd_holderTitle::after {'
  +'  content: "";'
  +'  position: absolute;'
  +'  top: -50%;'
  +'  right: -50%;'
  +'  bottom: -50%;'
  +'  left: -50%;'
  +'  background: linear-gradient(to bottom, rgba(229, 172, 142, 0), rgba(255,255,255,0.7) 50%, rgba(229, 172, 142, 0));'
  +'  transform: rotateZ(-60deg) translate(-5em, -24.5em)'
  +'}'
  +'.snappdOuterHolder{'
  +'  padding:5px;'
  +'  padding-top:15px;'
  +'  padding-bottom:15px;'
  +'  padding-bottom:0px;'
  +'  background:#e9eefc;'
  +'}'
  +'.snappdOuterHolder .snappd_holderTitle {'
  +'  font-family:\'Roboto\';'
  +'  font-weight: 400;'
  +'  color:#fff;'
  +'  margin-bottom:12.5px;'
  +'  margin-bottom:0px;'
  +'  background: #002baf;'
  +'  background: -moz-linear-gradient(left, #293a6b 0%, #7a95e2 49%, #293b6c 100%);'
  +'  background: -webkit-linear-gradient(left, #293a6b 0%,#7a95e2 49%,#293b6c 100%);'
  +'  background: linear-gradient(to right, #293a6b 0%,#7a95e2 49%,#293b6c 100%);'
  +'  border:none;'
  +'  text-align:left;'
  +'  font-size: 18px;'
  +'  width:100%;'
  //+'  padding: 0 1em;'
  +'  position: relative;'
  +'  overflow: hidden;'
  +'  line-height: 32px;'
  +'  border-bottom:2px solid #131426;'
  //Width fixes...
  +'  padding-top: 0px;'
  +'  padding-bottom: 0px;'
  +'  left: -5px;'
  +'  width: calc(100% + 10px);'
  +'}'
  +'.snappd_holderTitle::after{'
  +'  animation: snappdWidgetSheen 4.5s forwards;'
  +'  animation-iteration-count: infinite;'
  +'}'

  +'@keyframes snappdWidgetSheen {'
  +'  0% {'
  +'    transform: rotateZ(-60deg) translate(-5em, -24.5em)'
  +'  }'
  +'  40% {'
  +'    transform: rotateZ(-60deg) translate(-5em, -24.5em)'
  +'  }'
  +'  100% {'
  +'    transform: rotateZ(-60deg) translate(-4em, 24.5em)'
  +'  }'
  +'}'

  +'.snappd_holderTitle,'
  +'.snappdOuterHolder{'
  +'  width:100%;'
  +'  box-sizing: border-box;'
  +'}'
  +'body .snappdOuterHolder .story_snappdOuterHolder {'
  +'  background: #8ba5ee;'
  +'  background: -moz-linear-gradient(180deg, rgba(255,169,0,1) 0%, rgba(238,206,165,1) 100%);'
  +'  background: -webkit-linear-gradient(180deg, #8ba5ee 0%, #19154d 100%);'
  +'  background: linear-gradient(180deg, #8ba5ee 0%, #19154d 100%);'
  +'  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#8ba5ee",endColorstr="#19154d",GradientType=1);'
  +'}';
  
  //If not rectangles set height auto
  if(SNAPPDWidgetSettings.shape != 'rectangle'){
    snappdWidgetPlayerDiv += '.snappdOuterHolder .snappd-stories-holder{'
    +' height:auto;'
    +'}';
  }
  
  //If not circles and apply to mobile only
  if(SNAPPDWidgetSettings.shape == 'rectangle'){
    
    if(SNAPPDWidgetSettings.sizeSet == 'mobile'){
    
      //Each story is 80 pixels X 120 pixels
      //The light blue BG is now 167 high (not including the Title strip)
      snappdWidgetPlayerDiv += '@media screen and (max-width: 450px){'
      +'  .snappdOuterHolder .story_snappdOuterHolder, .snappdOuterHolder .snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle{'
      +'    height:120px!important;'
      +'    width:80px!important;'
      +'  }'
      +' div#snappdEmbedWidget, .snappdOuterHolder{'
      +'   height:auto!important;'
      +' }'
      +' .snappdOuterHolder .snappd_holderTitle {'
      +'   margin-bottom:0px;'
      +' }'
      +' .snappdOuterHolder .snappd-stories-holder{'
      +'  height:120px;'
      +' }'
      +'}';
    
    }else if(SNAPPDWidgetSettings.sizeSet == 'all'){
    
      //If not circle and apply to mobile and desktop
      //Each story is 80 pixels X 120 pixels
      //The light blue BG is now 167 high (not including the Title strip)
      snappdWidgetPlayerDiv += '.snappdOuterHolder .story_snappdOuterHolder, .snappdOuterHolder .snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle{'
      +'  height:120px!important;'
      +'  width:80px!important;'
      +'}'
      +'.snappdOuterHolder .snappd_holderTitle {'
      +'   margin-bottom:0px;'
      +'}'
      +'div#snappdEmbedWidget, .snappdOuterHolder{'
      +'  height:auto!important;'
      +'}'
      +' .snappdOuterHolder .snappd-stories-holder{'
      +'  height:120px;'
      +' }';
    }
  }
  
  if(SNAPPDWidgetSettings.toggleWrapper == 'off'){
    //Check if wrapper is switch off
    snappdWidgetPlayerDiv += '.snappdOuterHolder{'
    +' background: none!important;'
    +'}'
    +'.snappdOuterHolder .snappd_holderTitle{'
    +' display:none!important;'
    +'}';
  }
  
  
  //QA FIX
  
  snappdWidgetPlayerDiv += 'body .snappdOuterHolder .snappdWidget {'
  +'  padding-top: 10px;'
  +'  padding-bottom: 10px;'
  +'}'
  +' body .snappdOuterHolder .snappd_holderTitle{'
  +'  color:red;'
  +'  background:none;'
  +'  border:none;'
  +'  text-align:center;'
  +'  padding:0px;'
  +'  font-weight:bold;'
  +'  font-family: Roboto, sans-serif;'
  +'  padding-top:10px;'
  +'}'
  +'body .snappdOuterHolder {'
  +'  padding-top: 0px!important;'
  +'  background: black!important;'
  +'  height:auto;'
  +'}'
  +'body .snappdOuterHolder .story_snappdOuterHolder {'
  +'  height: 360px!important;'
  +'  background: none!important;'
  +'  width: 202.50px!important;'
  +'}'
  +'body .snappdOuterHolder .snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle{'
  +'  height:100%!important;'
  +'  width:100%!important;'
  +'  padding: 0px!important;'
  +'}'
  +'body .snappdOuterHolder .snappd-stories-holder{'
  +'  height:auto;'
  +'}'
  +'body .snappd_holderTitle::after{'
  +'  display:none;'
  +'}'
  +'body .snappdOuterHolder .snappdWidget .snappd-stories-holder .story_snappdOuterHolder::after{'
  +'  content:"";'
  +'  height:3px;'
  +'  background:rgba(255,255,255,0);'
  +'  position:absolute;'
  +'  z-index:999;'
  +'  width:calc(100% - 10px);'
  +'  left:0;'
  +'  top:0;'
  +'  margin:5px;'
  +'  margin-top:7px;'
  +'  border-raduis:3px;'
  +'  background-image: linear-gradient(90deg, rgba(255,255,255,0.25) 47.37%, rgba(255,255,255,0) 47.37%, rgba(255,255,255,0) 50%, rgba(255,255,255,0.25) 50%, rgba(255,255,255,0.25) 97.37%, rgba(255,255,255,0) 97.37%, rgba(255,255,255,0) 100%);'
  +'background-size: 100px;'
  +'}'
  +'body .snappdOuterHolder .snappdWidget .snappd-stories-holder .story_snappdOuterHolder::before{'
  +'  content: "";'
  +'  height: 3px;'
  +'  background: rgba(255,255,255,0.65);'
  +'  position: absolute;'
  //+'  z-index: 999;'
  +'  width: 47px;'
  +'  left: 0;'
  +'  top: 0;'
  +'  margin: 5px;'
  +'  margin-top: 7px;'
  +'  border-radius: 3px;'
  +'}'
  +'body .snappdOuterHolder .snappdWidget .snappd-stories-holder .story_snappdOuterHolder{position:relative;}'
  +'body .snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle::after {'
  +'  height: 30px;'
  +'  width: 30px;'
  +'  position: absolute;'
  +'  top: 22px;'
  +'  left: 10px;'
  +'  content: "";'
  +'  z-index: 10;'
  +'  display: block;'
  +'  border-radius: 100%;'
  +'  border: none;'
  +'  background-size: 70%;'
  +'  background-color: black;'
  +'  padding: 2px;'
  +'  box-sizing: content-box;'
  +'}'
  +'body .snappdWidget .snappd-stories-holder .story_snappdOuterHolder:first-of-type .storiesWidgetThemeThumbsCircle::before{'
  +'  content:"";'
  +'  background-image:url(https://firebasestorage.googleapis.com/v0/b/snappd-6be54.appspot.com/o/widget%2Fimg%2Fplay-story.png?alt=media&token=snappd-widget-cloud-new);'
  +'  background-size:50px;'
  +'  background-position:center;'
  +'  background-repeat:no-repeat;'
  +'  position:absolute;'
  +'  top:0;'
  +'  left:0;'
  +'  height:100%;'
  +'  width:100%;'
  +'  z-index:500000;'
  +'  filter:invert(1);'
  +'}';
  
  snappdWidgetPlayerDiv += '@media screen and (max-width: 450px){'
  +' body .snappdOuterHolder .snappdWidget .story_snappdOuterHolder{'
  +'  width: 214px!important;'
  +'  height: 381px!important;'
  +' }'
  +' body .snappdOuterHolder .story_snappdOuterHolder:first-of-type {'
  +'  margin-left: 15px;'
  +' }'
  +' body .snappdOuterHolder .story_snappdOuterHolder{'
  +'  margin-right:16px;'
  +' }'
  +' body .snappdWidget .snappd-stories-holder .story_snappdOuterHolder .storiesWidgetThemeThumbsCircle::before{'
  +'  content:"";'
  +'  background-image:url(https://firebasestorage.googleapis.com/v0/b/snappd-6be54.appspot.com/o/widget%2Fimg%2Fplay-story.png?alt=media&token=snappd-widget-cloud-new);'
  +'  background-size:50px;'
  +'  background-position:center;'
  +'  background-repeat:no-repeat;'
  +'  position:absolute;'
  +'  top:0;'
  +'  left:0;'
  +'  height:100%;'
  +'  width:100%;'
  +'  z-index:500000;'
  +'  filter:invert(1);'
  //Hide play button
  +'  background:none!important'
  +' }'
  //Adjust clips width
  +' body .snappdOuterHolder .snappdWidget .snappd-stories-holder .story_snappdOuterHolder::after{'
  +'  background-size:103px;'
  +' }'
  +' body .snappdOuterHolder .snappdWidget .snappd-stories-holder .story_snappdOuterHolder::before{'
  +'  width:49px'
  +' }'
  +'}';
  
    
  }
  
  if(SNAPPDWidgetSettings.hideavatar == false){
    var userProfileAvatar = "https://firebasestorage.googleapis.com/v0/b/snappd-6be54.appspot.com/o/user%2FeO1VLWTKO8cmWdvDPvvTgXhEoVa2%2Favatar.jpg?alt=media&amp;token=1318b8c4-fc5f-45df-92c7-82258b530a07";
      snappdWidgetPlayerDiv += '.snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle::after{'
      +'    background: black;'
      +'    height: 55px;'
      +'    width: 55px;'
      +'    position: relative;'
      +'    top: -70px;'
      +'    left: 0px;'
      +'    content: "";'
      +'    z-index: 999999;'
      +'    display: block;'
      +'    border-radius: 100%;'
      +'    margin: 0 auto;'
      +'    border: 2px solid #'+SNAPPDWidgetSettings.border+';'
      +'    box-shadow: inset 0 0 0 2px white;'
      +'    background-image: url('+userProfileAvatar+');'
      +'    background-size: cover;'
      +'}'
      +'.snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle:hover::after{'
      +'    border-color:#'+SNAPPDWidgetSettings.hover+';'
      +'}';
  }
  snappdWidgetPlayerDiv += '.snappdWidget .snappd-stories-holder .storiesWidgetThemeThumbsCircle::before {'
  +'    content: "";'
  +'    background: -moz-linear-gradient(top, rgba(0,0,0,0) 50%, rgba(0,0,0,1) 100%);'
  +'    background: -webkit-linear-gradient(top, rgba(0,0,0,0) 50%,rgba(0,0,0,1) 100%);'
  +'    background: linear-gradient(to bottom, rgba(0,0,0,0) 50%,rgba(0,0,0,1) 100%);'
  +'    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#00000000\', endColorstr=\'#a6000000\',GradientType=0 );'
  +'    height: 100%;'
  +'    width: 100%;'
  +'    display: block;'
  +'    border-radius: 3px;'
  +'    z-index: 888;'
  +'}'
  
  +'.snappd-story-follow-link {'
  +'display: inline-block!important;'
  +'  position: absolute!important;'
  +'    width: 24px!important;'
  +'    height: 24px!important;'
  +'    z-index: 10!important;'
  +'    top: 24px;'
  +'    left: 12px;'
  +'    bottom: 12px!important;'
  +'    cursor: pointer;'
  +'}'
  
  +'.snappd-story-follow-link svg{'
  +' width:22px; height:22px;'
  +'}'
  
  +'@media screen and (max-width: 450px){'
  +'  .snappd-story-follow-link {'
  +'    left: 52px;'
  +'  }'
  +'}'
  
    
    +'.snappd-story-unmute-audioTap{'
    +'    width: 24px!important;'
    +'    height: 24px!important;'
    +'     background-image:url("data:image/svg+xml\;'
    +'     charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'24\' height=\'24\' fill=\'%23FFF\'%3E%3Cpath d=\'M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\'/%3E%3Cpath d=\'M0 0h24v24H0z\' fill=\'none\'/%3E%3C/svg%3E")!important;'
    +'}'
    +'.snappd-story-mute-audioTap{'
    +'    width: 24px!important;'
    +'    height: 24px!important;'
    +'     background-image:url("data:image/svg+xml\;'
    +'     charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'24\' height=\'24\' fill=\'%23FFF\'%3E%3Cpath d=\'M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\'/%3E%3Cpath d=\'M0 0h24v24H0z\' fill=\'none\'/%3E%3C/svg%3E")!important'
    +'}'
    +'.snappd-story-audio-controls{'
    +'  display: inline-block!important;'
    +'  position: absolute!important;'
    +'  width: 24px!important;'
    +'  height: 24px!important;'
    +'  z-index: 10!important;'
    +'  top: 20px;'
    +'  right: 12px!important;'
    +'  bottom: 12px!important;'
    +'  cursor:pointer;'
    +' }'
    
    +'.snappdTimelineFrameHolder .snappd-widget-story-spinner {'
    +'  right: 52px!important;'
    +'}'
   +'</style>';

    if(document.querySelectorAll("div#snappdEmbedWidget").length == 0){
        //$('body').prepend('<div id="snappdEmbedWidget"></div>');
        var widgetElementDiv = document.createElement('div'); 
        widgetElementDiv.id = 'snappdEmbedWidget';
        document.body.appendChild(div);
    }
    
    
    if(this.instagramId == '90min_football'){
      //Add Holder & Title
      var snappdOuterHolder = document.createElement('div');
      snappdOuterHolder.classList = 'snappdOuterHolder';
      snappdOuterHolder.innerHTML = '<div class="snappd_holderTitle">Today\'s Instagram Stories</div>';
      var referenceNode = document.querySelector('div#snappdEmbedWidget');
      referenceNode.parentNode.insertBefore(snappdOuterHolder, referenceNode);
      snappdOuterHolder.appendChild(referenceNode);
    }
    
    snappdDivHolder = document.querySelector("div#snappdEmbedWidget");
    snappdDivHolder.innerHTML = snappdWidgetHMTL;
    
    var playerDivStyling = document.createElement("div");
    playerDivStyling.classList = 'snappd_playerDivStyling';
    playerDivStyling.style.display = 'none';
    playerDivStyling.innerHTML = snappdWidgetPlayerDiv;
    document.body.appendChild(playerDivStyling);
    //document.body.innerHTML += snappdWidgetPlayerDiv;

    //Check only one Overlay
    if( document.querySelectorAll('.snappdPlayOverlay').length == 2){
        document.querySelectorAll('.snappdPlayOverlay')[0].remove(); 
    }
    if( document.querySelectorAll('.snappdPlayOverlayBackground').length == 2){
        document.querySelectorAll('.snappdPlayOverlayBackground')[0].remove(); 
    }
    
    
    window.snappd_autoMoveToNextStory = false;
        
    if(this.instagramId == '90min_football'){
      //If minute media arrow left / right arrows
      document.querySelector('div#snappdEmbedWidget .left-arrow').addEventListener("click", function(event) {
        var holderWidth = document.querySelector('.snappdWidget').clientWidth;
        var currentScroll = document.querySelector('.snappdWidget').scrollLeft; 
        document.querySelector('.snappdWidget').scrollLeft -= Math.ceil(114+12);
        if(currentScroll-Math.ceil(144+16) <= 0){
         document.querySelector('div#snappdEmbedWidget .left-arrow').style.opacity = '0.5';
        }else{
         document.querySelector('div#snappdEmbedWidget .left-arrow').style.opacity = '1';
        }
      });
      document.querySelector('div#snappdEmbedWidget .right-arrow').addEventListener("click", function(event) {
        var holderWidth = document.querySelector('.snappdWidget').clientWidth;
        var currentScroll = document.querySelector('.snappdWidget').scrollLeft; 
        document.querySelector('.snappdWidget').scrollLeft += Math.ceil(114+12);
        if(currentScroll+Math.ceil(144+16) > 0){
         document.querySelector('div#snappdEmbedWidget .left-arrow').style.opacity = '1';
        }else{
         document.querySelector('div#snappdEmbedWidget .left-arrow').style.opacity = '0.5';
        }
      });
    }

    //Wait for thumbnails to load before displaying
    var storyElementsLoop = document.querySelectorAll('div#snappdEmbedWidget .snappdWidget .snappd-stories-holder .snappd-story-circle.snappd-story-border');
    
    var that = this;
    Array.from(storyElementsLoop).forEach(index => {
        var shortID = index.dataset['storyId'];
        var thumbURL = index.dataset['videoThumbPath'];
        
        //Load In Story Once Image loaded
        var url = thumbURL;
        var img = new Image();
        document.querySelector('[data-story-id="'+shortID+'"]').style.display = 'none';
        img.onload = function(){
            if(index.dataset.storylinks == 'none'){
                var remEle = document.querySelector('[data-story-id="'+shortID+'"]');
                remEle.parentNode.removeChild(remEle);
            }else{
                document.querySelector('[data-story-id="'+shortID+'"]').style.backgroundImage = 'url('+thumbURL+')';
                document.querySelector('[data-story-id="'+shortID+'"]').style.display = 'inline-block';
            }
        }
        img.src = url;

     });
    that.setupStoryListener();
    
    
    //Add Switch init click trigger here
    window._snappdTriggerClick = '0';
    
    if('russell' == 'roiael'){
      window._snappdTriggerClick = '1';
    }
    if(window._snappdTriggerClick == '1'){
      var newTrigger = document.querySelector('.container div#image101 img'); //[src="assets/images/image101.jpg?v48727200218651"]');
      newTrigger.style.cursor='pointer';
      newTrigger.addEventListener("click", function(event) {
        document.querySelectorAll('.snappd-stories-holder div')[0].click();
      });
    }
    
    
    //Center on resize
    if('russell' == '90min_football'){
      window.addEventListener("resize", function(){
        var cardOne = document.querySelectorAll('.snappdWidget .snappd-story-border')[1];
        var absMid = (document.querySelector("div#snappdEmbedWidget").offsetWidth/2);
        var sW = 214;
        var mgnL = 15;
        var mgnR = 15;
        var sWh = (sW/2);
        var sndMid = (sW+mgnL+mgnR+sWh);
        document.querySelector("div#snappdEmbedWidget .snappdWidget").scrollTo(sndMid-absMid,0);
        //console.log('Center Story');
      });
    }

    //Fetch Rest Of Stories
    if('0' != '1'){
        
        var userId = 'eO1VLWTKO8cmWdvDPvvTgXhEoVa2'
        var fetchPath = 'https://firebasestorage.googleapis.com/v0/b/snappd-6be54.appspot.com/o/widget%2Farchive-stories%2F'+userId+'.json?alt=media&token=snappd-widget-cloud';
        var that = this;
        fetch(fetchPath).then(response => {
          return response.json();
        }).then(data => {
          // Work with JSON data here
          
          window.snappdWidgetExtraStories = data;
           if (typeof window.snappdWidgetExtraStories != 'undefined'){
                if(window.snappdWidgetExtraStories.length != 0){
                     
                    Array.from(window.snappdWidgetExtraStories).forEach(val => {
                  
                        var clipsData = '';
                        var jsonDataText = '';
                        var thumbsStr = '';
                        var linksStr = '';
                        var fileTypesStr = '';
                        if (typeof val.usingClips !== 'undefined') {
                            if(val.usingClips == 1){
                              thumbsStr = val.clipsThumbs.join(', ');
                              linksStr = val.links.join(', ');
                              thumbsStr = thumbsStr.replace(/\s+/g, '');
                              linksStr = linksStr.replace(/\s+/g, '');
                              clipsData = 'data-clipsThumbs="'+thumbsStr+'" data-storyLinks="'+linksStr+'"';
                              jsonDataText = '<textarea style="display:none;">'+JSON.stringify(val.clips)+'</textarea>';
                              
                              if(val.fileTypes){
                                  if(val.fileTypes != 'none'){
                                    //console.log(val.fileTypes);
                                    clipsData += ' data-fileTypes="'+val.fileTypes.join(', ')+'"';
                                    fileTypesStr = val.fileTypes.join(', ');
                                  }
                              }
                            }
                        }
                        
                        var displayType = '';
                        if(SNAPPDWidgetSettings.shape == 'rectangle'){
                            displayType = 'storiesWidgetThemeThumbsCircle';
                        }
                        
                        
                        var viewedStoriesList = [];
                        if (typeof(localStorage) !== "undefined") {
                          if (localStorage.snappd_ViewedStories) {
                            viewedStoriesList = localStorage.snappd_ViewedStories.split(',');
                          } else {
                            localStorage.snappd_ViewedStories = '';
                            viewedStoriesList = localStorage.snappd_ViewedStories.split(',')
                          }
                        }
                        viewedStoriesList = '';
                        var viewed = '';
                        if(viewedStoriesList.includes(val.short)){
                          viewed = 'viewed';
                        }
                        
                        //Only allow if new
                        if(val.links != 'none'){
                            
                            var newStoryElement = document.createElement('div');
                            newStoryElement.innerHTML = '<div class="snappd-story-tagline" style="display:none;">'+val.tagline+'</div>'+jsonDataText;
                            newStoryElement.classList = viewed+' snappd-story-circle snappd-story-border '+displayType;
                            newStoryElement.title = 'Click to watch story';
                            newStoryElement.style = 'background-image:url('+val.thumb+')';
                            newStoryElement.dataset.uploaded = val.uploaded;
                            newStoryElement.setAttribute('data-story-id', val.short);
                            newStoryElement.setAttribute('data-video-thumb-path', val.thumb);
                            newStoryElement.setAttribute('data-video-play-path', val.video);
                            newStoryElement.setAttribute('data-video-webm-path', val.webm);
                            newStoryElement.setAttribute('data-fileTypes', fileTypesStr);
                            newStoryElement.setAttribute('data-clipsThumbs', thumbsStr);
                            newStoryElement.setAttribute('data-storyLinks', linksStr);
                            
                            newStoryElement.setAttribute('data-animatedcover', val.animatedCover);
                            
                            document.querySelector('div#snappdEmbedWidget .snappdWidget .snappd-stories-holder').appendChild(newStoryElement);
                            
                            //Load In Story Once Image loaded
                            var url = val.thumb;
                            var img = new Image();
                            document.querySelector('[data-story-id="'+val.short+'"]').style.display = 'none'; //();
                            img.onload = function(){
                                document.querySelector('[data-story-id="'+val.short+'"]').style.backgroundImage = 'url('+val.thumb+')';
                                document.querySelector('[data-story-id="'+val.short+'"]').style.display = 'inline-block';
                            }
                            img.src = url;
                            /////////////
                        }
                        
                     });
                    
                     //Send event widget embed
                     window.snappd_numStories = document.querySelectorAll('div#snappdEmbedWidget .snappdWidget .snappd-stories-holder .snappd-story-circle').length;
                     snappd_trackWidgetEvent('widget embed', 'number of stories='+window.snappd_numStories+';');
                     
                     that.onceWidgetViewableTrack();
                     
                     that.setupStoryListener();
                }
            }
        }).catch(err => {
          // Do something for an error here
        });
 
    }
};  
_snappdHighlightWidget.prototype.onceWidgetViewableTrack = function(element)
{  
  function snappd_experienceBeginAfterload(sScriptSrc, loadedCallback) {
      var oHead = document.getElementsByTagName("HEAD")[0];
      var oScript = document.createElement('script');
      oScript.type = 'text/javascript';
      oScript.src = sScriptSrc;
      oHead.appendChild(oScript);
      oScript.onload = loadedCallback;
  }
  
  
  if(typeof(VisSense) === 'undefined'){
  // let's load the Google API js and run function GoggleApiLoaded once it is done.
    snappd_experienceBeginAfterload("https://cdnjs.cloudflare.com/ajax/libs/vissense/0.9.0/vissense.js", snappd_experienceBeginAfterloadScript);
  }
    
  function snappd_experienceBeginAfterloadScript() {
    
    var throttle = VisSense.Utils.throttle;
    
    var myElement = document.querySelector('div#snappdEmbedWidget');
    if('russell' == '90min_football'){
      myElement = document.querySelector('.snappdOuterHolder');
    }
    window.snappd_embedWidgetViewable = false;
    function snappd_updateStatsElement(monitor) {
      if(window.snappd_embedWidgetViewable == false){
        var state = monitor.state();
        var percentage = Math.round(state.percentage * 100);
        if(percentage >= 50){
          //track viewable view
          window.snappd_embedWidgetViewable = true;
          snappd_trackWidgetEvent('widget viewable impression', 'number of stories='+window.snappd_numStories+';');
          monitor.stop();
        }
      }
    }
    VisSense.VisMon.Builder(VisSense(myElement)).on('percentagechange', throttle(function(monitor, newValue, oldValue) {
      snappd_updateStatsElement(monitor);
    }, 150)).build().start();
  }


};

_snappdHighlightWidget.prototype.createStoryObject = function(element)
{

    var story = [];
          
    //Create Array of Each Element Type
    if(element.dataset.clipsthumbs){
        var thumbs = element.dataset.clipsthumbs;
        thumbs = thumbs.split(',');
              
        var links = element.dataset.storylinks;
        links = links.split(',');
              
        var assets = element.querySelector("textarea").value;
        assets = JSON.parse(assets);
        
        var fileTypes = [];
        if(element.dataset.filetypes){
            if(element.dataset.filetypes != 'none'){
                fileTypes = element.dataset.filetypes;
                fileTypes = fileTypes.split(',');
            }
        }
              
        //Loop all
        var clipIndex = 0;
        for (clip in assets) {
            //if(clipIndex < 50){
            //console.log(clip, assets[clipIndex]);
            
            var fileType = 'video';
            //console.log(fileTypes, fileTypes[clipIndex]);
            if(fileTypes[clipIndex] !== undefined || fileTypes[clipIndex] != 'undefined'){
                fileType = fileTypes[clipIndex];
            }
            //console.log(fileType);
            if(fileType != 'photo' && fileType != 'video'){
                fileType = 'video';
            }
            
            if(assets[clipIndex] === undefined || assets[clipIndex] == 'undefined'){
                
            }else{
                var clipObj = {};
                clipObj.type = fileType; //'video';
                clipObj.cta = 'See More';
                clipObj.link = links[clipIndex];
                if(fileType == 'photo'){
                    clipObj.asset = thumbs[clipIndex];
                }else{
                    clipObj.asset = assets[clipIndex];
                }
                clipObj.thumbnail = thumbs[clipIndex];
                    
                if(links == 'none'){
                    clipObj.link = '';
                }
                if(thumbs == 'none'){
                    clipObj.thumbnail = '';
                }
                story[clipIndex] = clipObj;
            }
            
            clipIndex++;
            //}
        }
          
        //Return new array
        return story;
    }else{
        element.style.display = 'none';
        return story;
    }
};

_snappdHighlightWidget.prototype.setupStoryListener = function()
{
    var t = this;
    console.log('now');
    if('russell' == '90min_football'){
      var cardOne = document.querySelectorAll('.snappdWidget .snappd-story-border')[1];
      var absMid = (document.querySelector("div#snappdEmbedWidget").offsetWidth/2);
      var sW = 214;
      var mgnL = 15;
      var mgnR = 15;
      var sWh = (sW/2);
      var sndMid = (sW+mgnL+mgnR+sWh);
      document.querySelector("div#snappdEmbedWidget .snappdWidget").scrollTo(sndMid-absMid,0);
      //console.log('Center Story');
    }
              
    var storyElementsLoop = document.querySelectorAll('.snappdWidget .snappd-stories-holder .snappd-story-border');
    Array.from(storyElementsLoop).forEach(link => {
         if(link.dataset.storylinks){
            if(link.dataset.storylinks == 'none'){
                link.style.display = 'none'; 
            }
         }else{
             if(link.dataset.storylinks != ""){
                console.log(link, link.dataset.storylinks);
                link.style.display = 'none';
             }
         }
         
         var addListener = true;
          if ("listening" in link.dataset){
            addListener = false;
          }
          if(addListener == true){
          
            link.setAttribute('data-listening', 'yes');
            
            //Add gradient border
            if(t.instagramId == '90min_football'){
              var viewed = '';
              
              if (link.className.match(/\bviewed\b/)) 
              {
                viewed = ' viewed';
              }
              
              var circleType = '-circle'
              if(SNAPPDWidgetSettings.shape == 'rectangle'){
                  circleType = '';
              }
              var snappdOuterHolder = document.createElement('div');
              snappdOuterHolder.classList = 'story_snappdOuterHolder'+circleType+viewed;
              var referenceNode = link;
              referenceNode.parentNode.insertBefore(snappdOuterHolder, referenceNode);
              snappdOuterHolder.appendChild(referenceNode);
              
              if(SNAPPDWidgetSettings.shape == 'circle'){
                //Is circle
                document.querySelector('div#snappdEmbedWidget').classList.add('circles');
                document.querySelector('.snappdOuterHolder').classList.add('circles');
              }
            }
          
           link.addEventListener("click", function(event) {
              
              var storyContents = t.createStoryObject(event.target);
              
              var poster = storyContents[0].thumbnail;
              if(poster == ''){
                  var eT = event.target;
                  poster = eT.style.backgroundImage.slice(4, -1).replace(/"/g, "").replace(/['"]/g, "");
              }
              var storyPlayback = new _snappd_widgetStoryPlayback(storyContents, poster, this, t.instagramId);
              //storyPlayback.mediaPoolFirstBuild();
           });
        }
    });
  
};

function checkStoriesWidgetDefaultStyling(obj){
    
  //Set Defaults
  if (window.obj === undefined) {
    window.obj = {};
  }
  if (obj.class === undefined) {
    obj.class = "snappdHighlightWidget_div";
  }
  if (obj.border === undefined) {
    obj.border = '825aff';
  }
  if (obj.hover === undefined) {
    obj.hover = '5b28f9';
  }
  if (obj.showTitle === undefined) {
    obj.showTitle = true;
  }
  if (obj.titleColor === undefined) {
    obj.titleColor = '000000';
  }
  if (obj.titleFont === undefined) {
    obj.titleFont = 'Arial';
  }
  if (obj.alignment === undefined) {
    obj.alignment = 'left';
  }
  if (obj.number === undefined) {
    obj.number = 20;
  }
  var customSize = true;
  if (obj.size === undefined) {
    obj.size = 56;
  }
  if(obj.size == 'small'){
    obj.size = 40;  
    customSize = false;
  }
  if(obj.size == 'default'){
    obj.size = 56;
    customSize = false;
  }
  if(obj.size == 'large'){
    obj.size = 100;
    customSize = false;
  }
  if(customSize == true){
    obj.aspectHeight = ((1280 / 720)*parseInt(obj.size));
  }else{
    obj.aspectHeight = 0;
  }
}

var snappdHighlightWidget_parseSettings = function(highlightsObj, userId){
  //Find collection
  var collectionElement = document.querySelector('div[data-snappdwidget="'+userId+'"]');
  var className = collectionElement.classList;
  //get settings
  var settings = {};
  settings.class = className;
  //set Defaults
  settings.size = collectionElement.dataset.size;
  settings.border = "825aff";
  settings.hover = "5b28f9";
  settings.showTitle = true;
  settings.titleFont = "Arial";
  settings.sizeSet = "mobile";
  settings.toggleWrapper = "on";
  settings.hideavatar = false;
  if ("size" in collectionElement.dataset){
    settings.size = collectionElement.dataset.size;
  }
  if ("number" in collectionElement.dataset){
    settings.number = parseInt(collectionElement.dataset.number);
  }
  if ("border" in collectionElement.dataset){
    settings.border = collectionElement.dataset.border;
  }
  if ("hover" in collectionElement.dataset){
    settings.hover = collectionElement.dataset.hover;
  }
  if ("showtitle" in collectionElement.dataset){
    settings.showTitle = collectionElement.dataset.showtitle;
    if(settings.showTitle == 'true'){
      settings.showTitle = true;
    }    
    if(settings.showTitle == 'false'){
      settings.showTitle = false;
    }
  }
  if ("titlefont" in collectionElement.dataset){
    settings.titleFont = collectionElement.dataset.titlefont;
  }
  if ("togglewrapper" in collectionElement.dataset){
    settings.toggleWrapper = collectionElement.dataset.togglewrapper;
  }
  if ("sizeset" in collectionElement.dataset){
    settings.sizeSet = collectionElement.dataset.sizeset;
  }
  if ("shape" in collectionElement.dataset){
    settings.shape = collectionElement.dataset.shape;
  }
  if ("alignment" in collectionElement.dataset){
    settings.alignment = collectionElement.dataset.alignment;
  }
  if("hideavatar" in collectionElement.dataset){
      settings.hideavatar = true;
      if(collectionElement.dataset.hideavatar == '0' || collectionElement.dataset.hideavatar == 'false'){
          settings.hideavatar = false;
      }
  }
  
  if(window.Snappd_Highlight_Widget == null){
    window.Snappd_Highlight_Widget = {};
  }
  window.Snappd_Highlight_Widget[userId] = settings;
  checkStoriesWidgetDefaultStyling(Snappd_Highlight_Widget[userId]);
  if(Snappd_Highlight_Widget.instance == null){
    Snappd_Highlight_Widget.instance = [];
  }
  Snappd_Highlight_Widget.instance[className] = new _snappdHighlightWidget('_snappdStoriesWidget', 'russell', className, highlightsObj);
}

var snappd_getRefQueryParam = function(s, url) {
  var temp = {};
  url.replace(/\??(?:([^=]+)=([^&]*)&?)/g,   function() {
    var decode = function(s) {
  return decodeURIComponent(s.split("+").join(" "));
  };
    temp[decode(arguments[1])] = decode(arguments[2]);
  });
  return temp[s];
};

var snappdHighlightWidget_callback = function(){
  
  if(window.Snappd_Highlight_Widget === undefined) {
    window.Snappd_Highlight_Widget = {};
  }
  
  var highlightsObj = JSON.parse(window.atob('e30='));
  var className = '';
  
  //if widget id use parse settings
  var parseSettingsMethod = 0;
  if(typeof(window.SNAPPDWidgetSettings) == 'undefined'){
    parseSettingsMethod = 1;
  }
  if(parseSettingsMethod === 1){
    snappdHighlightWidget_parseSettings(highlightsObj, 'eO1VLWTKO8cmWdvDPvvTgXhEoVa2');
  }else{
     
      checkStoriesWidgetDefaultStyling(Snappd_Highlight_Widget);
      if(Snappd_Highlight_Widget['_snappdStoriesWidget']){
        checkStoriesWidgetDefaultStyling(Snappd_Highlight_Widget['_snappdStoriesWidget']);
        className = Snappd_Highlight_Widget['_snappdStoriesWidget'].class;
      }else{
        Snappd_Highlight_Widget['_snappdStoriesWidget'] = window.Snappd_Highlight_Widget;
        className = Snappd_Highlight_Widget.class;
      }
      if(Snappd_Highlight_Widget.instance == null){
        Snappd_Highlight_Widget.instance = [];
      }
      Snappd_Highlight_Widget.instance[className] = new _snappdHighlightWidget('_snappdStoriesWidget', 'russell', className);
      
  }
  
};

(function() {
  if (document.readyState === "complete" || (document.readyState !== "loading" && !document.documentElement.doScroll)) {
    snappdHighlightWidget_callback();
  } else {
    document.addEventListener("DOMContentLoaded", snappdHighlightWidget_callback);
  }
})();
 </script>